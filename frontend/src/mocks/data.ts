import {
  ActivityLogEntry,
  Client,
  ClientPolicy,
  ClientReminderCalendarItem,
  ClientTaskChecklistItem,
  Deal,
  DealDetailsData,
  DealDocument,
  DealNote,
  Payment,
  Task,
} from "@/types/crm";
import {
  NotificationChannelState,
  NotificationEventEntry,
  NotificationFeedItem,
} from "@/types/notifications";
import type {
  AdminAuditLogEntry,
  AdminDictionaryEntry,
  AdminRole,
  AdminUser,
} from "@/types/admin";

export const dealNotesMock: DealNote[] = [
  {
    id: "note-1",
    dealId: "deal-1",
    author: "Анна Савельева",
    content: "Созвонились с клиентом, уточнили список покрываемых рисков.",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
  },
  {
    id: "note-2",
    dealId: "deal-2",
    author: "Иван Плахов",
    content: "Клиент попросил ещё один расчёт с повышенным лимитом.",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
  },
];

export const dealDocumentsMock: DealDocument[] = [
  {
    id: "doc-1",
    dealId: "deal-1",
    title: "Коммерческое предложение",
    fileName: "kp-alpha-log.pdf",
    fileSize: 248_000,
    uploadedAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    uploadedBy: "Анна Савельева",
  },
  {
    id: "doc-2",
    dealId: "deal-3",
    title: "Расчёт стоимости ДМС",
    fileName: "calc-dms.xlsx",
    fileSize: 92_000,
    uploadedAt: new Date(Date.now() - 1000 * 60 * 60 * 8).toISOString(),
    uploadedBy: "Мария Орлова",
  },
];

const notificationNow = new Date();

function subtractMinutes(minutes: number) {
  return new Date(notificationNow.getTime() - minutes * 60_000).toISOString();
}

export const notificationFeedMock: NotificationFeedItem[] = [
  {
    id: "notification-1",
    title: "Новый комментарий в сделке",
    message: "Анна Савельева оставила заметку в сделке «Корпоративная страховка».",
    createdAt: subtractMinutes(12),
    source: "crm",
    category: "deal",
    tags: ["Заметка", "Корпоративная страховка"],
    context: {
      dealId: "deal-1",
      link: {
        href: "/deals/deal-1",
        label: "Открыть сделку",
      },
    },
    channels: ["sse"],
    deliveryStatus: "delivered",
    read: false,
    important: true,
  },
  {
    id: "notification-2",
    title: "Просроченный платёж",
    message: "Платёж по сделке «Обновление полиса КАСКО» просрочен на 3 дня.",
    createdAt: subtractMinutes(48),
    source: "payments",
    category: "payment",
    tags: ["Платежи", "Просрочено"],
    context: {
      dealId: "deal-2",
      link: {
        href: "/payments?dealId=deal-2",
        label: "Посмотреть платёж",
      },
    },
    channels: ["sse", "telegram"],
    deliveryStatus: "failed",
    read: false,
    important: true,
  },
  {
    id: "notification-3",
    title: "Новая задача",
    message: "Назначена задача «Подготовить КП» по клиенту ООО «Альфа Логистик».",
    createdAt: subtractMinutes(90),
    source: "crm",
    category: "task",
    tags: ["Задачи"],
    context: {
      clientId: "client-1",
      link: {
        href: "/tasks",
        label: "Перейти к задачам",
      },
    },
    channels: ["sse"],
    deliveryStatus: "delivered",
    read: true,
    important: false,
  },
  {
    id: "notification-4",
    title: "Обновление политики безопасности",
    message: "Система безопасности CRM обновила список разрешений для роли «Менеджер».",
    createdAt: subtractMinutes(240),
    source: "system",
    category: "security",
    tags: ["Безопасность"],
    channels: ["sse"],
    deliveryStatus: "delivered",
    read: true,
    important: false,
  },
  {
    id: "notification-5",
    title: "Успешная отправка в Telegram",
    message: "Уведомление о продлении ДМС доставлено в канал Telegram",
    createdAt: subtractMinutes(360),
    source: "system",
    category: "system",
    tags: ["Интеграции"],
    channels: ["sse", "telegram"],
    deliveryStatus: "delivered",
    read: true,
    important: false,
  },
];

export const notificationChannelSettingsMock: NotificationChannelState[] = [
  {
    channel: "sse",
    label: "Встроенный канал (браузер)",
    description: "Обновления в реальном времени через SSE без дополнительных настроек.",
    enabled: true,
    editable: false,
    lastChangedAt: subtractMinutes(5),
  },
  {
    channel: "telegram",
    label: "Telegram",
    description: "Пересылать критичные уведомления в корпоративный канал Telegram.",
    enabled: false,
    editable: true,
    lastChangedAt: subtractMinutes(120),
  },
];

export const notificationEventJournalMock: NotificationEventEntry[] = [
  {
    id: "event-1",
    timestamp: subtractMinutes(8),
    actor: "Анна Савельева",
    summary: "Изменила этап сделки «Корпоративная страховка» на 'Переговоры'",
    source: "crm",
    category: "deal",
    severity: "info",
    tags: ["Изменение этапа"],
    metadata: {
      dealId: "deal-1",
    },
  },
  {
    id: "event-2",
    timestamp: subtractMinutes(55),
    actor: "Сервис платежей",
    summary: "Платёж #PAY-2042 помечен как просроченный",
    source: "payments",
    category: "payment",
    severity: "warning",
    tags: ["Просрочено"],
    metadata: {
      dealId: "deal-2",
    },
  },
  {
    id: "event-3",
    timestamp: subtractMinutes(180),
    actor: "Система безопасности",
    summary: "Пользователь Алексей Романов получил роль «Администратор»",
    source: "system",
    category: "security",
    severity: "error",
    tags: ["Доступ"],
  },
  {
    id: "event-4",
    timestamp: subtractMinutes(260),
    actor: "Сервис уведомлений",
    summary: "Пересылает уведомления о платежах в Telegram",
    source: "system",
    category: "system",
    severity: "info",
    tags: ["Интеграции"],
  },
  {
    id: "event-5",
    timestamp: subtractMinutes(400),
    actor: "Мария Орлова",
    summary: "Создала задачу «Подготовить КП» для клиента ООО «Альфа Логистик»",
    source: "crm",
    category: "task",
    severity: "info",
    tags: ["Задачи"],
    metadata: {
      clientId: "client-1",
    },
  },
];

const now = Date.now();
const hourInMs = 3_600_000;
const dayInMs = 86_400_000;

export const dealsMock: Deal[] = [
  {
    id: "deal-1",
    name: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    probability: 0.65,
    stage: "qualification",
    owner: "Анна Савельева",
    updatedAt: new Date(now - hourInMs).toISOString(),
    nextReviewAt: new Date(now + dayInMs * 2).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 14).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/AL.svg",
    riskTags: [
      { id: "risk-1", label: "Просроченный платёж", tone: "high" },
    ],
    priorityTag: { label: "Высокий", level: "high" },
    quickTags: [
      { id: "product-dms", label: "ДМС", tone: "info" },
      { id: "segment-b2b", label: "B2B" },
    ],
  },
  {
    id: "deal-2",
    name: "Обновление полиса КАСКО",
    clientId: "client-2",
    clientName: "ИП Петров",
    probability: 0.3,
    stage: "negotiation",
    owner: "Иван Плахов",
    updatedAt: new Date(now - hourInMs * 2).toISOString(),
    nextReviewAt: new Date(now + dayInMs).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 7).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/IP.svg",
    riskTags: [
      { id: "risk-2", label: "Новый клиент", tone: "medium" },
    ],
    priorityTag: { label: "Средний", level: "normal" },
    quickTags: [
      { id: "product-kasko", label: "КАСКО", tone: "info" },
    ],
  },
  {
    id: "deal-3",
    name: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    probability: 0.8,
    stage: "proposal",
    owner: "Мария Орлова",
    updatedAt: new Date(now - hourInMs * 4).toISOString(),
    nextReviewAt: new Date(now + dayInMs).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 3).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/TI.svg",
    riskTags: [
      { id: "risk-3", label: "Высокий чек", tone: "medium" },
    ],
    priorityTag: { label: "Высокий", level: "high" },
    quickTags: [
      { id: "product-dms", label: "ДМС", tone: "info" },
      { id: "segment-tech", label: "Технологии" },
    ],
  },
  {
    id: "deal-4",
    name: "Страхование склада",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    probability: 0.9,
    stage: "closedWon",
    owner: "Анна Савельева",
    updatedAt: new Date(now - dayInMs * 3).toISOString(),
    nextReviewAt: new Date(now - dayInMs * 2).toISOString(),
    expectedCloseDate: new Date(now - dayInMs * 5).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/AL.svg",
    riskTags: [
      { id: "risk-4", label: "Истёкший полис", tone: "critical" },
    ],
    priorityTag: { label: "Низкий", level: "low" },
    quickTags: [
      { id: "product-property", label: "Имущество" },
    ],
  },
];

export const dealDetailsMock: Record<string, DealDetailsData> = {
  "deal-1": {
    id: "deal-1",
    name: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    stage: "qualification",
    probability: 0.65,
    expectedCloseDate: new Date(now + dayInMs * 14).toISOString(),
    nextReviewAt: new Date(now + dayInMs * 2).toISOString(),
    updatedAt: new Date(now - hourInMs).toISOString(),
    owner: "Анна Савельева",
    avatarUrl: "https://avatars.dicebear.com/api/initials/AL.svg",
    riskTags: [
      { id: "risk-1", label: "Просроченный платёж", tone: "high" },
      { id: "risk-1-2", label: "Не подтверждена документация", tone: "medium" },
    ],
    priorityTag: { label: "Высокий приоритет", level: "high", reason: "Важный корпоративный клиент" },
    quickTags: [
      { id: "product-dms", label: "ДМС", tone: "info" },
      { id: "segment-b2b", label: "B2B" },
      { id: "renewal", label: "Продление" },
    ],
    overview: {
      metrics: [
        { id: "probability", label: "Вероятность закрытия", value: "65%" },
        {
          id: "next-review",
          label: "Следующий просмотр",
          value: new Intl.DateTimeFormat("ru-RU", { dateStyle: "medium" }).format(new Date(now + dayInMs * 2)),
          hint: "Обязательно к обновлению",
        },
      ],
      nextEvents: [
        {
          id: "next-step",
          label: "Созвон по условиям",
          date: new Date(now + dayInMs).toISOString(),
          isSoon: true,
        },
        {
          id: "next-review",
          label: "Следующий обзор",
          date: new Date(now + dayInMs * 2).toISOString(),
        },
      ],
      warnings: [
        {
          id: "warning-payment",
          label: "Просрочен платёж #3",
          severity: "critical",
          description: "Требуется связаться с клиентом",
        },
      ],
      lastInteractions: [
        {
          id: "activity-1",
          title: "Звонок с финансовым директором",
          occurredAt: new Date(now - hourInMs * 3).toISOString(),
          author: "Анна Савельева",
          channel: "call",
          excerpt: "Обсудили корректировки по рискам",
        },
        {
          id: "activity-2",
          title: "Комментарий от исполнителя",
          occurredAt: new Date(now - hourInMs * 6).toISOString(),
          author: "Мария Орлова",
          channel: "note",
          excerpt: "Обновила расчёт программы",
        },
      ],
      confirmedPayments: [
        {
          id: "confirmed-1",
          amount: 350000,
          currency: "RUB",
          paidAtActual: new Date(now - dayInMs).toISOString(),
          recordedBy: {
            id: "user-1",
            name: "Игорь Миронов",
            title: "Финансовый менеджер",
          },
          comment: "Средства поступили на расчётный счёт",
        },
      ],
      currentPolicyId: "policy-1",
    },
    forms: [
      {
        id: "core",
        title: "Основные данные",
        fields: [
          {
            id: "name",
            label: "Название сделки",
            type: "text",
            value: "Корпоративная страховка",
            required: true,
          },
          {
            id: "nextReviewAt",
            label: "Следующий просмотр",
            type: "date",
            value: new Date(now + dayInMs * 2).toISOString().slice(0, 10),
            required: true,
          },
          {
            id: "owner",
            label: "Ответственный",
            type: "text",
            value: "Анна Савельева",
          },
        ],
      },
      {
        id: "finance",
        title: "Финансовые параметры",
        collapsedByDefault: true,
        fields: [
          {
            id: "probability",
            label: "Вероятность",
            type: "number",
            value: "65",
          },
        ],
      },
      {
        id: "widgets",
        title: "Дополнительные виджеты",
        fields: [
          {
            id: "ai-suggestion",
            label: "Рекомендации ИИ",
            type: "textarea",
            value: "Предложите клиенту пакет расширенного покрытия",
            disabled: true,
            hint: "Доступно при активном фиче-флаге",
          },
        ],
      },
    ],
    calculations: [
      {
        id: "calc-1",
        insurer: "АльфаСтрахование",
        program: "Корпоративное здоровье",
        premium: 450000,
        currency: "RUB",
        period: "01.01.2025 — 31.12.2025",
        status: "ready",
        policyId: "policy-1",
        updatedAt: new Date(now - hourInMs * 4).toISOString(),
        files: [
          {
            id: "file-1",
            name: "calc-ready.xlsx",
            size: 120_000,
            uploadedAt: new Date(now - hourInMs * 5).toISOString(),
            uploadedBy: "Мария Орлова",
          },
        ],
        tags: [
          { id: "status-ready", label: "Готово", tone: "success" },
          { id: "await-confirm", label: "Ожидает подтверждения", tone: "warning" },
        ],
      },
      {
        id: "calc-2",
        insurer: "Ингосстрах",
        program: "Расширенный пакет",
        premium: 620000,
        currency: "RUB",
        period: "01.01.2025 — 31.12.2025",
        status: "pending",
        updatedAt: new Date(now - hourInMs * 10).toISOString(),
        files: [
          {
            id: "file-2",
            name: "draft.pdf",
            size: 52_000,
            uploadedAt: new Date(now - hourInMs * 11).toISOString(),
            uploadedBy: "Мария Орлова",
          },
        ],
        tags: [
          { id: "draft", label: "Черновик", tone: "warning" },
        ],
      },
    ],
    policies: [
      {
        id: "policy-1",
        number: "POL-2024-001",
        product: "Корпоративное здоровье",
        status: "active",
        periodStart: new Date(now - dayInMs * 30).toISOString(),
        periodEnd: new Date(now + dayInMs * 335).toISOString(),
        premium: 980000,
        currency: "RUB",
        owner: "Анна Савельева",
        highlight: true,
        badges: [
          { id: "policy-current", label: "Текущий", tone: "success" },
        ],
        payments: [
          {
            id: "payment-1",
            number: "001",
            plannedDate: new Date(now - dayInMs * 5).toISOString(),
            actualDate: new Date(now - dayInMs * 3).toISOString(),
            amount: 350000,
            currency: "RUB",
            confirmationStatus: "confirmed",
            responsible: "Игорь Миронов",
            tags: [
              { id: "confirmed", label: "Подтверждено", tone: "success" },
            ],
            incomes: [
              {
                id: "income-1",
                kind: "income",
                title: "Оплата клиента",
                plannedAmount: 350000,
                actualAmount: 350000,
                status: "approved",
              },
            ],
            expenses: [
              {
                id: "expense-1",
                kind: "expense",
                title: "Комиссия исполнителя",
                plannedAmount: 85000,
                actualAmount: 80000,
                status: "approved",
              },
            ],
            timeline: [
              {
                id: "timeline-1",
                label: "Создан платёж",
                at: new Date(now - dayInMs * 6).toISOString(),
                user: "Анна Савельева",
              },
              {
                id: "timeline-2",
                label: "Подтвержден",
                at: new Date(now - dayInMs * 3).toISOString(),
                user: "Игорь Миронов",
                comment: "Средства зачислены",
              },
            ],
          },
          {
            id: "payment-2",
            number: "002",
            plannedDate: new Date(now + dayInMs * 30).toISOString(),
            amount: 320000,
            currency: "RUB",
            confirmationStatus: "expected",
            tags: [
              { id: "expected", label: "Ожидается", tone: "warning" },
            ],
            incomes: [
              {
                id: "income-2",
                kind: "income",
                title: "Отложенный платёж",
                plannedAmount: 320000,
                status: "pending",
              },
            ],
            expenses: [],
            timeline: [
              {
                id: "timeline-3",
                label: "Запланирован",
                at: new Date(now - dayInMs).toISOString(),
                user: "Анна Савельева",
              },
            ],
          },
        ],
      },
      {
        id: "policy-archived",
        number: "POL-2023-010",
        product: "Корпоративное здоровье",
        status: "archived",
        periodStart: new Date(now - dayInMs * 400).toISOString(),
        periodEnd: new Date(now - dayInMs * 30).toISOString(),
        premium: 920000,
        currency: "RUB",
        owner: "Анна Савельева",
        badges: [
          { id: "archive", label: "Архив", tone: "warning" },
        ],
        payments: [],
      },
    ],
    actions: {
      shortcuts: [
        {
          id: "create-task",
          label: "Создать задачу",
          intent: "task",
          description: "Назначить исполнителю новое действие",
        },
        {
          id: "send-email",
          label: "Отправить письмо",
          intent: "email",
          description: "Через интеграцию с почтой",
        },
        {
          id: "request-docs",
          label: "Запросить документы",
          intent: "documents",
          description: "Отправить ссылку клиенту",
        },
      ],
      integrations: [
        {
          id: "analytics",
          label: "Аналитика продаж",
          description: "Экспортировать в BI",
          status: "ready",
          actionLabel: "Открыть",
        },
        {
          id: "tasks-service",
          label: "Автоматические действия",
          description: "Пауза интеграции",
          status: "error",
          errorMessage: "RabbitMQ недоступен",
        },
      ],
      banners: [
        {
          id: "integration-error",
          type: "warning",
          message: "Интеграция с сервисом задач недоступна. Повторите позже.",
        },
      ],
    },
    tasksBoard: {
      filters: {
        types: [
          { id: "call", label: "Звонки", active: true },
          { id: "meeting", label: "Встречи", active: false },
          { id: "document", label: "Документы", active: true },
        ],
        showForeign: false,
      },
      lanes: [
        {
          id: "assigned",
          title: "Назначенные",
          hint: "Активные задачи исполнителя",
          emptyCta: "Запланировать задачу",
          tasks: [
            {
              id: "task-1",
              title: "Подготовить обновлённый расчёт",
              dueDate: new Date(now + hourInMs * 8).toISOString(),
              owner: "Мария Орлова",
              stage: "in_progress",
              type: "document",
              checklist: [
                { id: "check-1", label: "Собрать данные", completed: true },
                { id: "check-2", label: "Согласовать с юристом", completed: false },
              ],
              journalLinkId: "activity-2",
            },
          ],
        },
        {
          id: "waiting",
          title: "К исполнению",
          hint: "Ожидают принятия",
          emptyCta: "Настроить автогенерацию",
          tasks: [
            {
              id: "task-2",
              title: "Созвон с клиентом",
              dueDate: new Date(now + dayInMs).toISOString(),
              owner: "Анна Савельева",
              stage: "todo",
              type: "call",
              checklist: [],
              journalLinkId: "activity-1",
            },
          ],
        },
        {
          id: "archive",
          title: "Архив",
          hint: "Закрытые задачи",
          emptyCta: "Нет закрытых задач",
          tasks: [],
        },
      ],
    },
    documentsV2: [
      {
        id: "agreement",
        title: "Договор",
        documents: [
          {
            id: "doc-main",
            name: "Основной договор.pdf",
            type: "PDF",
            size: 1_024_000,
            category: "Договор",
            uploadedAt: new Date(now - dayInMs).toISOString(),
            uploadedBy: "Анна Савельева",
            reviewStatus: "approved",
            reviewer: "Юлия Самойлова",
            reviewComment: "Проверено",
            versions: [
              {
                id: "doc-main-v2",
                version: 2,
                uploadedAt: new Date(now - dayInMs).toISOString(),
                uploadedBy: "Анна Савельева",
                size: 1_024_000,
              },
              {
                id: "doc-main-v1",
                version: 1,
                uploadedAt: new Date(now - dayInMs * 3).toISOString(),
                uploadedBy: "Анна Савельева",
                size: 980_000,
                comment: "Черновик",
              },
            ],
          },
        ],
      },
      {
        id: "consents",
        title: "Согласия",
        documents: [
          {
            id: "doc-consent",
            name: "Согласие на обработку.docx",
            type: "DOCX",
            size: 250_000,
            category: "Согласия",
            uploadedAt: new Date(now - hourInMs * 12).toISOString(),
            uploadedBy: "Кира Лапина",
            reviewStatus: "pending",
            versions: [
              {
                id: "doc-consent-v1",
                version: 1,
                uploadedAt: new Date(now - hourInMs * 12).toISOString(),
                uploadedBy: "Кира Лапина",
                size: 250_000,
              },
            ],
          },
        ],
      },
      {
        id: "materials",
        title: "Дополнительные материалы",
        documents: [],
      },
    ],
    finance: {
      lastUpdated: new Date(now - hourInMs).toISOString(),
      metrics: [
        {
          id: "total-accrued",
          label: "Всего начислено",
          amount: 980000,
          currency: "RUB",
          linkToPayments: true,
        },
        {
          id: "received",
          label: "Получено",
          amount: 350000,
          currency: "RUB",
          linkToPayments: true,
        },
        {
          id: "agent-commission",
          label: "Комиссия агента",
          amount: 120000,
          currency: "RUB",
        },
        {
          id: "executor-expenses",
          label: "Расходы исполнителя",
          amount: 80000,
          currency: "RUB",
        },
        {
          id: "pending",
          label: "Ожидает подтверждения",
          amount: 320000,
          currency: "RUB",
          linkToPayments: true,
        },
      ],
      exportAvailable: true,
    },
    activity: [
      {
        id: "activity-1",
        type: "meeting",
        author: "Анна Савельева",
        message: "Провели встречу с клиентом, согласовали покрытие",
        createdAt: new Date(now - hourInMs * 3).toISOString(),
        clientId: "client-1",
        dealId: "deal-1",
      },
      {
        id: "activity-2",
        type: "system",
        author: "CRM",
        message: "Задача \"Подготовить обновлённый расчёт\" создана автоматически",
        createdAt: new Date(now - hourInMs * 5).toISOString(),
        clientId: "client-1",
        dealId: "deal-1",
      },
      {
        id: "activity-3",
        type: "email",
        author: "Мария Орлова",
        message: "Отправлено письмо с презентацией программы",
        createdAt: new Date(now - hourInMs * 8).toISOString(),
        clientId: "client-1",
        dealId: "deal-1",
      },
    ],
  },
};

export const clientsMock: Client[] = [
  {
    id: "client-1",
    name: "ООО «Альфа Логистик»",
    email: "info@alpha-log.ru",
    phone: "+7 495 100-20-30",
    industry: "Логистика",
    city: "Москва",
    totalDeals: 6,
    lifetimeValue: 5200000,
    lastActivityAt: new Date().toISOString(),
    status: "active",
    segment: "Корпоративный",
    kycStatus: "verified",
    owner: "Анна Савельева",
    tags: ["B2B", "Логистика"],
    contacts: [
      {
        id: "client-1-email",
        type: "email",
        label: "E-mail",
        value: "info@alpha-log.ru",
        primary: true,
      },
      {
        id: "client-1-phone",
        type: "phone",
        label: "Телефон",
        value: "+7 495 100-20-30",
        primary: true,
      },
      {
        id: "client-1-address",
        type: "address",
        label: "Офис",
        value: "Москва, ул. Правды, 10",
      },
      {
        id: "client-1-messenger",
        type: "messenger",
        label: "Telegram",
        value: "@alpha_ceo",
        comment: "Использовать для срочных вопросов",
      },
    ],
    notes: "Основной канал — email, предпочитает ежеквартальные встречи и заранее согласованные КП.",
  },
  {
    id: "client-2",
    name: "ИП Петров",
    email: "sales@petrov-ip.ru",
    phone: "+7 812 700-80-90",
    industry: "Розница",
    city: "Санкт-Петербург",
    totalDeals: 2,
    lifetimeValue: 430000,
    lastActivityAt: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(),
    status: "active",
    segment: "Малый бизнес",
    kycStatus: "in_review",
    owner: "Иван Плахов",
    tags: ["КАСКО", "Лояльность"],
    contacts: [
      {
        id: "client-2-email",
        type: "email",
        label: "Основной e-mail",
        value: "sales@petrov-ip.ru",
        primary: true,
      },
      {
        id: "client-2-phone",
        type: "phone",
        label: "Телефон",
        value: "+7 812 700-80-90",
        primary: true,
      },
      {
        id: "client-2-phone-2",
        type: "phone",
        label: "Мобильный",
        value: "+7 921 555-44-33",
      },
    ],
    notes: "Просит напоминать о продлении за месяц до окончания полиса, предпочитает звонки днём.",
  },
  {
    id: "client-3",
    name: "АО «Тех Инновации»",
    email: "cto@techinno.ru",
    phone: "+7 383 600-70-80",
    industry: "ИТ",
    city: "Новосибирск",
    totalDeals: 4,
    lifetimeValue: 1680000,
    lastActivityAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 6).toISOString(),
    status: "paused",
    segment: "Технологии",
    kycStatus: "verified",
    owner: "Мария Орлова",
    tags: ["ДМС", "Стратегический"],
    contacts: [
      {
        id: "client-3-email",
        type: "email",
        label: "E-mail финансового директора",
        value: "finance@techinno.ru",
        primary: true,
      },
      {
        id: "client-3-phone",
        type: "phone",
        label: "Телефон",
        value: "+7 383 600-70-80",
        primary: true,
      },
      {
        id: "client-3-website",
        type: "website",
        label: "Сайт",
        value: "https://techinno.ru",
      },
    ],
    notes: "Сейчас рассматривают переход на новую программу ДМС, ждут расчёты от страховой.",
  },
];

export const clientPoliciesMock: ClientPolicy[] = [
  {
    id: "policy-1",
    clientId: "client-1",
    number: "CR-2024-0001",
    product: "Страхование складского комплекса",
    insurer: "Ингосстрах",
    status: "active",
    premium: 450000,
    currency: "RUB",
    periodStart: new Date(now - dayInMs * 120).toISOString(),
    periodEnd: new Date(now + dayInMs * 245).toISOString(),
    createdAt: new Date(now - dayInMs * 140).toISOString(),
    updatedAt: new Date(now - hourInMs * 6).toISOString(),
    nextPaymentDate: new Date(now + dayInMs * 30).toISOString(),
    lastInteractionAt: new Date(now - hourInMs * 8).toISOString(),
    manager: {
      id: "manager-anna",
      name: "Анна Савельева",
      title: "Аккаунт-менеджер",
      email: "anna.s@crm.local",
      phone: "+7 495 111-22-33",
    },
    tags: ["Продление", "VIP"],
    coverageSummary: "Склад, ответственность, грузоперевозки",
    attachmentsCount: 4,
    reminders: [
      {
        id: "policy-1-reminder-1",
        title: "Проверить отчёт по убыткам",
        dueDate: new Date(now + dayInMs * 7).toISOString(),
        description: "Согласовать с отделом рисков",
        policyId: "policy-1",
      },
      {
        id: "policy-1-reminder-2",
        title: "Подготовить продление",
        dueDate: new Date(now + dayInMs * 60).toISOString(),
        description: "Запросить условия у страховщика",
        policyId: "policy-1",
      },
    ],
  },
  {
    id: "policy-2",
    clientId: "client-1",
    number: "CR-2023-0450",
    product: "Добровольное медицинское страхование",
    insurer: "Согаз",
    status: "expiring",
    premium: 820000,
    currency: "RUB",
    periodStart: new Date(now - dayInMs * 300).toISOString(),
    periodEnd: new Date(now + dayInMs * 15).toISOString(),
    createdAt: new Date(now - dayInMs * 320).toISOString(),
    updatedAt: new Date(now - hourInMs * 2).toISOString(),
    nextPaymentDate: new Date(now + dayInMs * 10).toISOString(),
    lastInteractionAt: new Date(now - hourInMs * 3).toISOString(),
    manager: {
      id: "manager-anna",
      name: "Анна Савельева",
      title: "Аккаунт-менеджер",
      email: "anna.s@crm.local",
      phone: "+7 495 111-22-33",
    },
    tags: ["ДМС", "Крупный чек"],
    coverageSummary: "150 сотрудников, расширенное покрытие",
    attachmentsCount: 6,
    reminders: [
      {
        id: "policy-2-reminder-1",
        title: "Согласовать новые тарифы",
        dueDate: new Date(now + dayInMs * 5).toISOString(),
        description: "Получить подтверждение от HR клиента",
        policyId: "policy-2",
      },
    ],
  },
  {
    id: "policy-3",
    clientId: "client-1",
    number: "CR-2021-0220",
    product: "КАСКО автопарк",
    insurer: "АльфаСтрахование",
    status: "archived",
    premium: 390000,
    currency: "RUB",
    periodStart: new Date(now - dayInMs * 680).toISOString(),
    periodEnd: new Date(now - dayInMs * 320).toISOString(),
    createdAt: new Date(now - dayInMs * 700).toISOString(),
    updatedAt: new Date(now - dayInMs * 320).toISOString(),
    lastInteractionAt: new Date(now - dayInMs * 300).toISOString(),
    manager: {
      id: "manager-anna",
      name: "Анна Савельева",
      title: "Аккаунт-менеджер",
      email: "anna.s@crm.local",
      phone: "+7 495 111-22-33",
    },
    tags: ["Архив", "КАСКО"],
    coverageSummary: "Автопарк из 12 машин",
    attachmentsCount: 2,
    reminders: [],
  },
  {
    id: "policy-4",
    clientId: "client-2",
    number: "CR-2024-1012",
    product: "КАСКО Личный автомобиль",
    insurer: "Росгосстрах",
    status: "pending",
    premium: 120000,
    currency: "RUB",
    periodStart: new Date(now - dayInMs * 15).toISOString(),
    periodEnd: new Date(now + dayInMs * 350).toISOString(),
    createdAt: new Date(now - dayInMs * 20).toISOString(),
    updatedAt: new Date(now - hourInMs * 10).toISOString(),
    nextPaymentDate: new Date(now + dayInMs * 30).toISOString(),
    manager: {
      id: "manager-ivan",
      name: "Иван Плахов",
      title: "Ведущий менеджер",
      email: "ivan.p@crm.local",
      phone: "+7 812 222-33-44",
    },
    tags: ["Новый клиент"],
    coverageSummary: "КАСКО + помощь на дорогах",
    attachmentsCount: 1,
    reminders: [
      {
        id: "policy-4-reminder-1",
        title: "Получить оригиналы документов",
        dueDate: new Date(now + dayInMs * 3).toISOString(),
        description: "Клиент заберёт в офисе",
        policyId: "policy-4",
      },
    ],
  },
  {
    id: "policy-5",
    clientId: "client-2",
    number: "CR-2023-0788",
    product: "ОСАГО",
    insurer: "Ингосстрах",
    status: "expired",
    premium: 38000,
    currency: "RUB",
    periodStart: new Date(now - dayInMs * 420).toISOString(),
    periodEnd: new Date(now - dayInMs * 55).toISOString(),
    createdAt: new Date(now - dayInMs * 440).toISOString(),
    updatedAt: new Date(now - dayInMs * 55).toISOString(),
    lastInteractionAt: new Date(now - dayInMs * 50).toISOString(),
    manager: {
      id: "manager-ivan",
      name: "Иван Плахов",
      title: "Ведущий менеджер",
      email: "ivan.p@crm.local",
      phone: "+7 812 222-33-44",
    },
    tags: ["Просрочен"],
    coverageSummary: "Легковой автомобиль",
    attachmentsCount: 0,
    reminders: [],
  },
  {
    id: "policy-6",
    clientId: "client-3",
    number: "CR-2024-2045",
    product: "ДМС расширенный",
    insurer: "ВТБ Страхование",
    status: "active",
    premium: 980000,
    currency: "RUB",
    periodStart: new Date(now - dayInMs * 40).toISOString(),
    periodEnd: new Date(now + dayInMs * 325).toISOString(),
    createdAt: new Date(now - dayInMs * 60).toISOString(),
    updatedAt: new Date(now - hourInMs * 12).toISOString(),
    nextPaymentDate: new Date(now + dayInMs * 45).toISOString(),
    lastInteractionAt: new Date(now - hourInMs * 26).toISOString(),
    manager: {
      id: "manager-maria",
      name: "Мария Орлова",
      title: "Эксперт по ДМС",
      email: "maria.o@crm.local",
      phone: "+7 383 333-44-55",
    },
    tags: ["ДМС", "High Tech"],
    coverageSummary: "200 сотрудников, телемедицина",
    attachmentsCount: 5,
    reminders: [
      {
        id: "policy-6-reminder-1",
        title: "Проверить отчёт по обращениям",
        dueDate: new Date(now + dayInMs * 14).toISOString(),
        description: "Собрать статистику за квартал",
        policyId: "policy-6",
      },
    ],
  },
];

export const clientTaskChecklistMock: ClientTaskChecklistItem[] = [
  {
    id: "client-task-1",
    title: "Уточнить список сотрудников для ДМС",
    dueDate: new Date(now + dayInMs * 2).toISOString(),
    completed: false,
    type: "follow_up",
    owner: "Анна Савельева",
    clientId: "client-1",
    policyId: "policy-2",
    reminderAt: new Date(now + hourInMs * 12).toISOString(),
  },
  {
    id: "client-task-2",
    title: "Подготовить акт сверки",
    dueDate: new Date(now + dayInMs * 5).toISOString(),
    completed: false,
    type: "document",
    owner: "Анна Савельева",
    clientId: "client-1",
    policyId: "policy-1",
    reminderAt: null,
  },
  {
    id: "client-task-3",
    title: "Позвонить по продлению ОСАГО",
    dueDate: new Date(now - dayInMs * 1).toISOString(),
    completed: false,
    type: "call",
    owner: "Иван Плахов",
    clientId: "client-2",
    policyId: "policy-5",
    reminderAt: new Date(now - hourInMs * 5).toISOString(),
  },
  {
    id: "client-task-4",
    title: "Запросить обратную связь по ДМС",
    dueDate: new Date(now + dayInMs * 8).toISOString(),
    completed: true,
    type: "meeting",
    owner: "Мария Орлова",
    clientId: "client-3",
    policyId: "policy-6",
    reminderAt: null,
  },
  {
    id: "client-task-5",
    title: "Создать задачу на продление ДМС",
    dueDate: new Date(now + dayInMs * 12).toISOString(),
    completed: false,
    type: "reminder",
    owner: "Анна Савельева",
    clientId: "client-1",
    reminderAt: new Date(now + dayInMs * 10).toISOString(),
  },
];

export const clientRemindersMock: ClientReminderCalendarItem[] = [
  {
    id: "reminder-1",
    title: "Контроль платежа по складу",
    occursAt: new Date(now + dayInMs * 3).toISOString(),
    kind: "payment",
    description: "Проверить поступление от клиента",
    clientId: "client-1",
    relatedPolicyId: "policy-1",
  },
  {
    id: "reminder-2",
    title: "Звонок по продлению ОСАГО",
    occursAt: new Date(now + dayInMs * 1).toISOString(),
    kind: "task",
    description: "Согласовать условия с клиентом",
    clientId: "client-2",
    relatedPolicyId: "policy-5",
    relatedTaskId: "client-task-3",
  },
  {
    id: "reminder-3",
    title: "Встреча по ДМС",
    occursAt: new Date(now + dayInMs * 9).toISOString(),
    kind: "checkup",
    description: "Плановая проверка удовлетворенности сотрудников программой ДМС",
    clientId: "client-3",
    relatedPolicyId: "policy-6",
    relatedTaskId: "client-task-4",
  },
  {
    id: "reminder-4",
    title: "Проверка документов по новому полису",
    occursAt: new Date(now + dayInMs * 4).toISOString(),
    kind: "task",
    description: "Получить оригиналы у курьера",
    clientId: "client-2",
    relatedPolicyId: "policy-4",
  },
  {
    id: "reminder-5",
    title: "Запросить условия у страховщика",
    occursAt: new Date(now + dayInMs * 6).toISOString(),
    kind: "other",
    description: "Отправить официальный запрос",
    clientId: "client-1",
    relatedPolicyId: "policy-2",
    relatedTaskId: "client-task-1",
  },
];

export const tasksMock: Task[] = [
  {
    id: "task-1",
    title: "Назначить встречу по условиям страхования",
    dueDate: new Date(Date.now() + 1000 * 60 * 60 * 12).toISOString(),
    status: "in_progress",
    completed: false,
    owner: "Анна Савельева",
    type: "meeting",
    tags: ["страхование", "встреча"],
    dealId: "deal-1",
    clientId: "client-1",
    reminderAt: new Date(Date.now() + 1000 * 60 * 30).toISOString(),
    description:
      "Согласовать с клиентом ключевые условия договора и зафиксировать вопросы, которые нужно обсудить на встрече.",
    checklist: [
      { id: "task-1-check-1", label: "Подготовить повестку", completed: true },
      { id: "task-1-check-2", label: "Собрать актуальные тарифы", completed: false },
      { id: "task-1-check-3", label: "Отправить приглашение клиенту", completed: false },
    ],
    comments: [
      {
        id: "task-1-comment-1",
        author: "Анна Савельева",
        message: "Клиент подтвердил доступность на завтра в 11:00.",
        createdAt: new Date(Date.now() - 1000 * 60 * 45).toISOString(),
      },
      {
        id: "task-1-comment-2",
        author: "Мария Орлова",
        message: "Подготовила шаблон презентации, осталось добавить расчёт.",
        createdAt: new Date(Date.now() - 1000 * 60 * 30).toISOString(),
      },
    ],
  },
  {
    id: "task-2",
    title: "Подготовить КП по новому пакету ДМС",
    dueDate: new Date(Date.now() + 1000 * 60 * 60 * 36).toISOString(),
    status: "waiting",
    completed: false,
    owner: "Мария Орлова",
    type: "document",
    tags: ["ДМС", "коммерческое предложение"],
    dealId: "deal-3",
    clientId: "client-3",
    description: "Собрать информацию по новым тарифам и согласовать предложение с юристами.",
    checklist: [
      { id: "task-2-check-1", label: "Получить входные данные", completed: true },
      { id: "task-2-check-2", label: "Согласовать расчёт", completed: false },
    ],
    comments: [
      {
        id: "task-2-comment-1",
        author: "Мария Орлова",
        message: "Жду подтверждения от страховой компании, обещали к вечеру.",
        createdAt: new Date(Date.now() - 1000 * 60 * 90).toISOString(),
      },
    ],
  },
  {
    id: "task-3",
    title: "Отправить напоминание об оплате",
    dueDate: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
    status: "new",
    completed: false,
    owner: "Иван Плахов",
    type: "reminder",
    tags: ["оплата", "напоминание"],
    dealId: "deal-2",
    clientId: "client-2",
    reminderAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
    description: "Отправить клиенту письмо с напоминанием об оплате и уточнить статус платежа.",
    checklist: [
      { id: "task-3-check-1", label: "Подготовить шаблон письма", completed: true },
      { id: "task-3-check-2", label: "Проверить контактные данные", completed: true },
      { id: "task-3-check-3", label: "Отправить уведомление", completed: false },
    ],
    comments: [
      {
        id: "task-3-comment-1",
        author: "Иван Плахов",
        message: "Созвонился с бухгалтерией клиента, ждут оплату до конца дня.",
        createdAt: new Date(Date.now() - 1000 * 60 * 15).toISOString(),
      },
    ],
  },
  {
    id: "task-4",
    title: "Загрузить подписанные документы",
    dueDate: new Date(Date.now() - 1000 * 60 * 60 * 30).toISOString(),
    status: "done",
    completed: true,
    owner: "Анна Савельева",
    type: "document",
    tags: ["документы"],
    dealId: "deal-4",
    clientId: "client-1",
    description: "Все документы подписаны клиентом, нужно добавить их в карточку сделки.",
    checklist: [
      { id: "task-4-check-1", label: "Проверить подписи", completed: true },
      { id: "task-4-check-2", label: "Загрузить в систему", completed: true },
    ],
    comments: [
      {
        id: "task-4-comment-1",
        author: "Анна Савельева",
        message: "Документы загружены, ссылку отправила клиенту.",
        createdAt: new Date(Date.now() - 1000 * 60 * 60 * 4).toISOString(),
      },
    ],
  },
];

const minutesInMs = 60_000;

export const paymentsMock: Payment[] = [
  {
    id: "payment-1",
    dealId: "deal-4",
    dealName: "Страхование склада",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    policyId: "policy-1",
    policyNumber: "CR-2024-0001",
    sequence: 1,
    amount: 450000,
    plannedAmount: 450000,
    currency: "RUB",
    status: "received",
    confirmationStatus: "confirmed",
    actualAmount: 452000,
    paidAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24 * 5).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 7).toISOString(),
    actualDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    comment: "Основная премия по полису",
    incomesTotal: 450000,
    expensesTotal: 0,
    netTotal: 450000,
    incomes: [
      {
        id: "income-1",
        paymentId: "payment-1",
        amount: 450000,
        plannedAmount: 450000,
        actualAmount: 450000,
        currency: "RUB",
        category: "client_payment",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        actualPostedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        note: "Поступление от клиента",
        status: "confirmed",
        adjustmentReason: "confirmation",
        attachments: [],
        history: [
          {
            id: "income-history-1",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
            changedBy: "Анна Савельева",
            plannedAmount: 450000,
            actualAmount: 450000,
            reason: "confirmation",
            note: "Поступление от клиента",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        createdBy: "Анна Савельева",
        updatedBy: "Анна Савельева",
      },
    ],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 10).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    recordedBy: "Анна Савельева",
    recordedByRole: "Главный админ",
    updatedBy: "Анна Савельева",
    history: [
      {
        id: "payment-1-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 9).toISOString(),
        changedBy: "Иван Плахов",
        reason: "Уточнили плановую сумму после согласования с клиентом",
        snapshot: {
          plannedAmount: 440000,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 8).toISOString(),
          status: "expected",
        },
      },
      {
        id: "payment-1-v2",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        changedBy: "Анна Савельева",
        reason: "Поступление подтверждено бухгалтерией",
        snapshot: {
          plannedAmount: 450000,
          actualAmount: 452000,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 7).toISOString(),
          actualDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
          status: "received",
        },
      },
    ],
  },
  {
    id: "payment-2",
    dealId: "deal-2",
    dealName: "Обновление полиса КАСКО",
    clientId: "client-2",
    clientName: "ИП Петров",
    policyId: "policy-2",
    policyNumber: "CR-2024-0042",
    sequence: 2,
    amount: 210000,
    plannedAmount: 210000,
    currency: "RUB",
    status: "expected",
    confirmationStatus: "pending",
    dueDate: new Date(Date.now() + minutesInMs * 60 * 72).toISOString(),
    plannedDate: new Date(Date.now() + minutesInMs * 60 * 48).toISOString(),
    comment: "Частичная оплата премии",
    incomesTotal: 120000,
    expensesTotal: 15000,
    netTotal: 105000,
        incomes: [
      {
        id: "income-2",
        paymentId: "payment-2",
        amount: 120000,
        plannedAmount: 120000,
        actualAmount: null,
        currency: "RUB",
        category: "advance",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        note: "Авансовый платёж",
        status: "pending_confirmation",
        adjustmentReason: null,
        attachments: [
          {
            id: "income-attachment-1",
            fileName: "receipt-advance.pdf",
            fileSize: 128000,
            uploadedAt: new Date(Date.now() - minutesInMs * 60 * 10).toISOString(),
            uploadedBy: "Иван Плахов",
            url: "https://example.com/receipt-advance.pdf",
          },
        ],
        history: [
          {
            id: "income-history-2",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
            changedBy: "Иван Плахов",
            plannedAmount: 120000,
            actualAmount: null,
            reason: "initial_planning",
            note: "Авансовый платёж",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        createdBy: "Иван Плахов",
        updatedBy: "Иван Плахов",
      },
    ],
    expenses: [
      {
        id: "expense-1",
        paymentId: "payment-2",
        amount: 15000,
        plannedAmount: 15000,
        actualAmount: null,
        currency: "RUB",
        category: "agent_fee",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        note: "Комиссия агента",
        status: "pending_confirmation",
        adjustmentReason: null,
        attachments: [
          {
            id: "expense-attachment-1",
            fileName: "agent-fee.docx",
            fileSize: 64000,
            uploadedAt: new Date(Date.now() - minutesInMs * 60 * 5).toISOString(),
            uploadedBy: "Иван Плахов",
          },
        ],
        history: [
          {
            id: "expense-history-1",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
            changedBy: "Иван Плахов",
            plannedAmount: 15000,
            actualAmount: null,
            reason: "initial_planning",
            note: "Комиссия агента",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 3).toISOString(),
        createdBy: "Иван Плахов",
        updatedBy: "Иван Плахов",
      },
    ],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 5).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 3).toISOString(),
    updatedBy: "Иван Плахов",
    history: [
      {
        id: "payment-2-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 4).toISOString(),
        changedBy: "Иван Плахов",
        reason: "Сдвинули дату по просьбе клиента",
        snapshot: {
          plannedAmount: 200000,
          plannedDate: new Date(Date.now() + minutesInMs * 60 * 24).toISOString(),
          status: "planned",
        },
      },
    ],
  },
  {
    id: "payment-3",
    dealId: "deal-3",
    dealName: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    policyId: "policy-3",
    policyNumber: "CR-2024-0128",
    sequence: 1,
    amount: 980000,
    plannedAmount: 980000,
    currency: "RUB",
    status: "cancelled",
    confirmationStatus: "pending",
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 48).toISOString(),
    comment: "Оплата отменена по запросу клиента",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 8).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
    recordedBy: undefined,
    recordedByRole: undefined,
    updatedBy: "Мария Орлова",
    history: [
      {
        id: "payment-3-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        changedBy: "Мария Орлова",
        reason: "Платёж отменён, ожидаем новый график",
        snapshot: {
          plannedAmount: 980000,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 48).toISOString(),
          status: "cancelled",
        },
      },
    ],
  },
  {
    id: "payment-4",
    dealId: "deal-1",
    dealName: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    policyId: "policy-4",
    policyNumber: "CR-2024-0020",
    sequence: 3,
    amount: 320000,
    plannedAmount: 320000,
    currency: "RUB",
    status: "planned",
    confirmationStatus: "pending",
    dueDate: new Date(Date.now() + minutesInMs * 60 * 24 * 21).toISOString(),
    plannedDate: new Date(Date.now() + minutesInMs * 60 * 24 * 18).toISOString(),
    comment: "Рассрочка на три части",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    history: [],
  },
  {
    id: "payment-5",
    dealId: "deal-3",
    dealName: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    policyId: "policy-3",
    policyNumber: "CR-2024-0128",
    sequence: 2,
    amount: 120000,
    plannedAmount: 120000,
    currency: "RUB",
    status: "paid_out",
    confirmationStatus: "confirmed",
    actualAmount: 118500,
    paidAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 3).toISOString(),
    actualDate: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    comment: "Возврат комиссии",
    incomesTotal: 0,
    expensesTotal: 120000,
    netTotal: -120000,
    incomes: [],
    expenses: [
      {
        id: "expense-2",
        paymentId: "payment-5",
        amount: 120000,
        plannedAmount: 120000,
        actualAmount: 118500,
        currency: "RUB",
        category: "refund",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        note: "Возврат клиенту",
        status: "confirmed",
        adjustmentReason: "refund",
        attachments: [],
        history: [
          {
            id: "expense-history-2",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
            changedBy: "Мария Орлова",
            plannedAmount: 120000,
            actualAmount: 118500,
            reason: "refund",
            note: "Подтверждена выплата клиенту",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        createdBy: "Мария Орлова",
        updatedBy: "Мария Орлова",
      },
    ],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 6).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    recordedBy: "Мария Орлова",
    recordedByRole: "Исполнитель",
    updatedBy: "Мария Орлова",
    history: [
      {
        id: "payment-5-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
        changedBy: "Мария Орлова",
        reason: "Подтвердили выплату страховой",
        snapshot: {
          plannedAmount: 120000,
          actualAmount: 118500,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 3).toISOString(),
          actualDate: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
          status: "paid_out",
        },
      },
    ],
  },
];

export const activitiesMock: ActivityLogEntry[] = [
  {
    id: "activity-1",
    type: "email",
    author: "Анна Савельева",
    message: "Отправлено уточнение условий страхования",
    createdAt: new Date(Date.now() - 1000 * 60 * 45).toISOString(),
    clientId: "client-1",
    dealId: "deal-1",
  },
  {
    id: "activity-2",
    type: "meeting",
    author: "Мария Орлова",
    message: "Созвон с клиентом по доработке КП",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    clientId: "client-3",
    dealId: "deal-3",
  },
  {
    id: "activity-3",
    type: "system",
    author: "Система",
    message: "Напоминание о просроченном платеже",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
    clientId: "client-2",
    dealId: "deal-2",
  },
  {
    id: "activity-4",
    type: "note",
    author: "Анна Савельева",
    message: "Получен новый список сотрудников для ДМС",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 12).toISOString(),
    clientId: "client-1",
    dealId: "deal-1",
  },
  {
    id: "activity-5",
    type: "email",
    author: "Иван Плахов",
    message: "Отправлено КП по новому полису КАСКО",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 26).toISOString(),
    clientId: "client-2",
    dealId: "deal-2",
  },
  {
    id: "activity-6",
    type: "meeting",
    author: "Мария Орлова",
    message: "Встреча с HR по итогам квартала",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 30).toISOString(),
    clientId: "client-3",
    dealId: "deal-3",
  },
  {
    id: "activity-7",
    type: "system",
    author: "Система",
    message: "Обновлены реквизиты клиента",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(),
    clientId: "client-1",
  },
  {
    id: "activity-8",
    type: "note",
    author: "Анна Савельева",
    message: "Получен отзыв о работе страховой",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 60).toISOString(),
    clientId: "client-1",
    dealId: "deal-4",
  },
  {
    id: "activity-9",
    type: "email",
    author: "Мария Орлова",
    message: "Отправлено предложение по телемедицине",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 72).toISOString(),
    clientId: "client-3",
  },
];

export const adminRolesMock: AdminRole[] = [
  {
    id: "role-super-admin",
    name: "Главный админ",
    description: "Полный доступ к управлению пользователями, справочниками и аудитом.",
    permissions: ["manage:users", "manage:dictionaries", "view:audit", "export:audit"],
  },
  {
    id: "role-sales",
    name: "Продавец",
    description: "Работа с воронкой и платежами без доступа к настройкам.",
    permissions: ["view:audit"],
    isDefault: true,
  },
  {
    id: "role-executor",
    name: "Исполнитель",
    description: "Работа с расчётами и документами без административных прав.",
    permissions: ["view:audit"],
  },
];

export const adminUsersMock: AdminUser[] = [
  {
    id: "admin-user-1",
    fullName: "Мария Крылова",
    email: "m.krylova@example.com",
    roleId: "role-super-admin",
    roleName: "Главный админ",
    status: "active",
    lastActiveAt: new Date(Date.now() - 1000 * 60 * 12).toISOString(),
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 90).toISOString(),
    updatedAt: new Date(Date.now() - 1000 * 60 * 12).toISOString(),
    mfaEnabled: true,
  },
  {
    id: "admin-user-2",
    fullName: "Антон Савельев",
    email: "a.savelev@example.com",
    roleId: "role-sales",
    roleName: "Продавец",
    status: "active",
    lastActiveAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 45).toISOString(),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    mfaEnabled: false,
  },
  {
    id: "admin-user-3",
    fullName: "Елена Павлова",
    email: "e.pavlova@example.com",
    roleId: "role-executor",
    roleName: "Исполнитель",
    status: "invited",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 7).toISOString(),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 2).toISOString(),
    mfaEnabled: false,
  },
  {
    id: "admin-user-4",
    fullName: "Олег Назаров",
    email: "o.nazarov@example.com",
    roleId: "role-sales",
    roleName: "Продавец",
    status: "suspended",
    lastActiveAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 20).toISOString(),
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 200).toISOString(),
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 20).toISOString(),
    mfaEnabled: true,
  },
];

export const adminDictionariesMock: AdminDictionaryEntry[] = [
  {
    id: "dict-deal-new",
    kind: "dealTypes",
    code: "new_policy",
    label: "Новый полис",
    description: "Продажа нового страхового продукта",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 40).toISOString(),
    updatedBy: "Мария Крылова",
  },
  {
    id: "dict-deal-renew",
    kind: "dealTypes",
    code: "renewal",
    label: "Пролонгация",
    description: "Продление действующего полиса",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
    updatedBy: "Мария Крылова",
  },
  {
    id: "dict-task-new",
    kind: "taskStatuses",
    code: "new",
    label: "Новая",
    description: "Задача создана и ожидает назначения",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 15).toISOString(),
    updatedBy: "Антон Савельев",
  },
  {
    id: "dict-task-waiting",
    kind: "taskStatuses",
    code: "waiting",
    label: "Ожидание",
    description: "Требуется внешнее действие клиента",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 120).toISOString(),
    updatedBy: "Мария Крылова",
  },
  {
    id: "dict-policy-issued",
    kind: "policyStatuses",
    code: "issued",
    label: "Выпущен",
    description: "Полис выпущен и передан клиенту",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 24).toISOString(),
    updatedBy: "Мария Крылова",
  },
  {
    id: "dict-policy-cancelled",
    kind: "policyStatuses",
    code: "cancelled",
    label: "Отменён",
    description: "Полис отменён по запросу клиента",
    isActive: false,
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(),
    updatedBy: "Мария Крылова",
  },
  {
    id: "dict-tag-urgent",
    kind: "taskTags",
    code: "urgent",
    label: "Срочно",
    description: "Требуется обработка в течение рабочего дня",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 5).toISOString(),
    updatedBy: "Антон Савельев",
  },
  {
    id: "dict-tag-audit",
    kind: "taskTags",
    code: "audit",
    label: "Для аудита",
    description: "Задачи с повышенным контролем",
    isActive: true,
    updatedAt: new Date(Date.now() - 1000 * 60 * 60 * 8).toISOString(),
    updatedBy: "Мария Крылова",
  },
];

export const adminAuditLogMock: AdminAuditLogEntry[] = [
  {
    id: "audit-1",
    actorId: "admin-user-1",
    actorName: "Мария Крылова",
    actorRole: "Главный админ",
    scope: "user",
    action: "user.invited",
    summary: "Приглашён новый исполнитель Елена Павлова",
    severity: "info",
    createdAt: new Date(Date.now() - 1000 * 60 * 50).toISOString(),
    entityId: "admin-user-3",
    entityType: "user",
    changes: [{ field: "status", before: "invited", after: "active" }],
  },
  {
    id: "audit-2",
    actorId: "admin-user-1",
    actorName: "Мария Крылова",
    actorRole: "Главный админ",
    scope: "dictionary",
    action: "dictionary.updated",
    summary: "Обновлён статус задачи waiting",
    severity: "info",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
    entityId: "dict-task-waiting",
    entityType: "dictionary",
    changes: [{ field: "description", before: "Ожидает действий", after: "Требуется внешнее действие клиента" }],
  },
  {
    id: "audit-3",
    actorId: "admin-user-4",
    actorName: "Олег Назаров",
    actorRole: "Продавец",
    scope: "security",
    action: "user.suspended",
    summary: "Учётная запись временно заблокирована до выяснения",
    severity: "warning",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 3).toISOString(),
    entityId: "admin-user-4",
    entityType: "user",
    metadata: { reason: "Фрод-проверка" },
  },
  {
    id: "audit-4",
    actorId: "system",
    actorName: "Система",
    actorRole: "Интеграция",
    scope: "integration",
    action: "sync.failed",
    summary: "Не удалось синхронизировать статусы задач с внешним сервисом",
    severity: "critical",
    createdAt: new Date(Date.now() - 1000 * 60 * 20).toISOString(),
    metadata: { retries: 3, endpoint: "tasks-sync" },
  },
];
