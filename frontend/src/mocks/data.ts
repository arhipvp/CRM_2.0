import {
  ActivityLogEntry,
  Client,
  Deal,
  DealDocument,
  DealNote,
  Payment,
  Task,
} from "@/types/crm";

export const dealNotesMock: DealNote[] = [
  {
    id: "note-1",
    dealId: "deal-1",
    author: "Анна Савельева",
    content: "Созвонились с клиентом, уточнили список покрываемых рисков.",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
  },
  {
    id: "note-2",
    dealId: "deal-2",
    author: "Иван Плахов",
    content: "Клиент попросил ещё один расчёт с повышенным лимитом.",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
  },
];

export const dealDocumentsMock: DealDocument[] = [
  {
    id: "doc-1",
    dealId: "deal-1",
    title: "Коммерческое предложение",
    fileName: "kp-alpha-log.pdf",
    fileSize: 248_000,
    uploadedAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    uploadedBy: "Анна Савельева",
  },
  {
    id: "doc-2",
    dealId: "deal-3",
    title: "Расчёт стоимости ДМС",
    fileName: "calc-dms.xlsx",
    fileSize: 92_000,
    uploadedAt: new Date(Date.now() - 1000 * 60 * 60 * 8).toISOString(),
    uploadedBy: "Мария Орлова",
  },
];

const now = Date.now();
const hourInMs = 3_600_000;
const dayInMs = 86_400_000;

export const dealsMock: Deal[] = [
  {
    id: "deal-1",
    name: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    value: 1200000,
    probability: 0.65,
    stage: "qualification",
    owner: "Анна Савельева",
    updatedAt: new Date(now - hourInMs).toISOString(),
    nextReviewAt: new Date(now + dayInMs * 2).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 14).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
  {
    id: "deal-2",
    name: "Обновление полиса КАСКО",
    clientId: "client-2",
    clientName: "ИП Петров",
    value: 210000,
    probability: 0.3,
    stage: "negotiation",
    owner: "Иван Плахов",
    updatedAt: new Date(now - hourInMs * 2).toISOString(),
    nextReviewAt: new Date(now + dayInMs).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 7).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
  {
    id: "deal-3",
    name: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    value: 980000,
    probability: 0.8,
    stage: "proposal",
    owner: "Мария Орлова",
    updatedAt: new Date(now - hourInMs * 4).toISOString(),
    nextReviewAt: new Date(now + dayInMs).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 3).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
  {
    id: "deal-4",
    name: "Страхование склада",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    value: 450000,
    probability: 0.9,
    stage: "closedWon",
    owner: "Анна Савельева",
    updatedAt: new Date(now - dayInMs * 3).toISOString(),
    nextReviewAt: new Date(now - dayInMs * 2).toISOString(),
    expectedCloseDate: new Date(now - dayInMs * 5).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
];

export const clientsMock: Client[] = [
  {
    id: "client-1",
    name: "ООО «Альфа Логистик»",
    email: "info@alpha-log.ru",
    phone: "+7 495 100-20-30",
    industry: "Логистика",
    city: "Москва",
    totalDeals: 6,
    lifetimeValue: 5200000,
    lastActivityAt: new Date().toISOString(),
  },
  {
    id: "client-2",
    name: "ИП Петров",
    email: "sales@petrov-ip.ru",
    phone: "+7 812 700-80-90",
    industry: "Розница",
    city: "Санкт-Петербург",
    totalDeals: 2,
    lifetimeValue: 430000,
    lastActivityAt: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(),
  },
  {
    id: "client-3",
    name: "АО «Тех Инновации»",
    email: "cto@techinno.ru",
    phone: "+7 383 600-70-80",
    industry: "ИТ",
    city: "Новосибирск",
    totalDeals: 4,
    lifetimeValue: 1680000,
    lastActivityAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 6).toISOString(),
  },
];

export const tasksMock: Task[] = [
  {
    id: "task-1",
    title: "Назначить встречу по условиям страхования",
    dueDate: new Date(Date.now() + 1000 * 60 * 60 * 12).toISOString(),
    completed: false,
    owner: "Анна Савельева",
    dealId: "deal-1",
    clientId: "client-1",
  },
  {
    id: "task-2",
    title: "Подготовить КП по новому пакету ДМС",
    dueDate: new Date(Date.now() + 1000 * 60 * 60 * 36).toISOString(),
    completed: false,
    owner: "Мария Орлова",
    dealId: "deal-3",
    clientId: "client-3",
  },
  {
    id: "task-3",
    title: "Отправить напоминание об оплате",
    dueDate: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
    completed: false,
    owner: "Иван Плахов",
    dealId: "deal-2",
    clientId: "client-2",
  },
];

const minutesInMs = 60_000;

export const paymentsMock: Payment[] = [
  {
    id: "payment-1",
    dealId: "deal-4",
    dealName: "Страхование склада",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    policyId: "policy-1",
    policyNumber: "CR-2024-0001",
    sequence: 1,
    amount: 450000,
    plannedAmount: 450000,
    currency: "RUB",
    status: "received",
    paidAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24 * 5).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 7).toISOString(),
    actualDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    comment: "Основная премия по полису",
    incomesTotal: 450000,
    expensesTotal: 0,
    netTotal: 450000,
    incomes: [
      {
        id: "income-1",
        paymentId: "payment-1",
        amount: 450000,
        currency: "RUB",
        category: "client_payment",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        note: "Поступление от клиента",
        createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        createdBy: "Анна Савельева",
        updatedBy: "Анна Савельева",
      },
    ],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 10).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    recordedBy: "Анна Савельева",
    updatedBy: "Анна Савельева",
  },
  {
    id: "payment-2",
    dealId: "deal-2",
    dealName: "Обновление полиса КАСКО",
    clientId: "client-2",
    clientName: "ИП Петров",
    policyId: "policy-2",
    policyNumber: "CR-2024-0042",
    sequence: 2,
    amount: 210000,
    plannedAmount: 210000,
    currency: "RUB",
    status: "expected",
    dueDate: new Date(Date.now() + minutesInMs * 60 * 72).toISOString(),
    plannedDate: new Date(Date.now() + minutesInMs * 60 * 48).toISOString(),
    comment: "Частичная оплата премии",
    incomesTotal: 120000,
    expensesTotal: 15000,
    netTotal: 105000,
    incomes: [
      {
        id: "income-2",
        paymentId: "payment-2",
        amount: 120000,
        currency: "RUB",
        category: "advance",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        note: "Авансовый платёж",
        createdAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        createdBy: "Иван Плахов",
        updatedBy: "Иван Плахов",
      },
    ],
    expenses: [
      {
        id: "expense-1",
        paymentId: "payment-2",
        amount: 15000,
        currency: "RUB",
        category: "agent_fee",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        note: "Комиссия агента",
        createdAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 3).toISOString(),
        createdBy: "Иван Плахов",
        updatedBy: "Иван Плахов",
      },
    ],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 5).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 3).toISOString(),
    updatedBy: "Иван Плахов",
  },
  {
    id: "payment-3",
    dealId: "deal-3",
    dealName: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    policyId: "policy-3",
    policyNumber: "CR-2024-0128",
    sequence: 1,
    amount: 980000,
    plannedAmount: 980000,
    currency: "RUB",
    status: "cancelled",
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 48).toISOString(),
    comment: "Оплата отменена по запросу клиента",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 8).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
    updatedBy: "Мария Орлова",
  },
  {
    id: "payment-4",
    dealId: "deal-1",
    dealName: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    policyId: "policy-4",
    policyNumber: "CR-2024-0020",
    sequence: 3,
    amount: 320000,
    plannedAmount: 320000,
    currency: "RUB",
    status: "planned",
    dueDate: new Date(Date.now() + minutesInMs * 60 * 24 * 21).toISOString(),
    plannedDate: new Date(Date.now() + minutesInMs * 60 * 24 * 18).toISOString(),
    comment: "Рассрочка на три части",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
  },
  {
    id: "payment-5",
    dealId: "deal-3",
    dealName: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    policyId: "policy-3",
    policyNumber: "CR-2024-0128",
    sequence: 2,
    amount: 120000,
    plannedAmount: 120000,
    currency: "RUB",
    status: "paid_out",
    paidAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 3).toISOString(),
    actualDate: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    comment: "Возврат комиссии",
    incomesTotal: 0,
    expensesTotal: 120000,
    netTotal: -120000,
    incomes: [],
    expenses: [
      {
        id: "expense-2",
        paymentId: "payment-5",
        amount: 120000,
        currency: "RUB",
        category: "refund",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        note: "Возврат клиенту",
        createdAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        createdBy: "Мария Орлова",
        updatedBy: "Мария Орлова",
      },
    ],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 6).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    recordedBy: "Мария Орлова",
    updatedBy: "Мария Орлова",
  },
];

export const activitiesMock: ActivityLogEntry[] = [
  {
    id: "activity-1",
    type: "email",
    author: "Анна Савельева",
    message: "Отправлено уточнение условий страхования",
    createdAt: new Date(Date.now() - 1000 * 60 * 45).toISOString(),
    clientId: "client-1",
    dealId: "deal-1",
  },
  {
    id: "activity-2",
    type: "meeting",
    author: "Мария Орлова",
    message: "Созвон с клиентом по доработке КП",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    clientId: "client-3",
    dealId: "deal-3",
  },
  {
    id: "activity-3",
    type: "system",
    author: "Система",
    message: "Напоминание о просроченном платеже",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
    clientId: "client-2",
    dealId: "deal-2",
  },
];
