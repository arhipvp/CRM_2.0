import {
  ActivityLogEntry,
  Client,
  Deal,
  DealDetailsData,
  DealDocument,
  DealNote,
  Payment,
  Task,
} from "@/types/crm";

export const dealNotesMock: DealNote[] = [
  {
    id: "note-1",
    dealId: "deal-1",
    author: "Анна Савельева",
    content: "Созвонились с клиентом, уточнили список покрываемых рисков.",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
  },
  {
    id: "note-2",
    dealId: "deal-2",
    author: "Иван Плахов",
    content: "Клиент попросил ещё один расчёт с повышенным лимитом.",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
  },
];

export const dealDocumentsMock: DealDocument[] = [
  {
    id: "doc-1",
    dealId: "deal-1",
    title: "Коммерческое предложение",
    fileName: "kp-alpha-log.pdf",
    fileSize: 248_000,
    uploadedAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    uploadedBy: "Анна Савельева",
  },
  {
    id: "doc-2",
    dealId: "deal-3",
    title: "Расчёт стоимости ДМС",
    fileName: "calc-dms.xlsx",
    fileSize: 92_000,
    uploadedAt: new Date(Date.now() - 1000 * 60 * 60 * 8).toISOString(),
    uploadedBy: "Мария Орлова",
  },
];

const now = Date.now();
const hourInMs = 3_600_000;
const dayInMs = 86_400_000;

export const dealsMock: Deal[] = [
  {
    id: "deal-1",
    name: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    value: 1200000,
    probability: 0.65,
    stage: "qualification",
    owner: "Анна Савельева",
    updatedAt: new Date(now - hourInMs).toISOString(),
    nextReviewAt: new Date(now + dayInMs * 2).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 14).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/AL.svg",
    riskTags: [
      { id: "risk-1", label: "Просроченный платёж", tone: "high" },
    ],
    priorityTag: { label: "Высокий", level: "high" },
    quickTags: [
      { id: "product-dms", label: "ДМС", tone: "info" },
      { id: "segment-b2b", label: "B2B" },
    ],
  },
  {
    id: "deal-2",
    name: "Обновление полиса КАСКО",
    clientId: "client-2",
    clientName: "ИП Петров",
    value: 210000,
    probability: 0.3,
    stage: "negotiation",
    owner: "Иван Плахов",
    updatedAt: new Date(now - hourInMs * 2).toISOString(),
    nextReviewAt: new Date(now + dayInMs).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 7).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/IP.svg",
    riskTags: [
      { id: "risk-2", label: "Новый клиент", tone: "medium" },
    ],
    priorityTag: { label: "Средний", level: "normal" },
    quickTags: [
      { id: "product-kasko", label: "КАСКО", tone: "info" },
    ],
  },
  {
    id: "deal-3",
    name: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    value: 980000,
    probability: 0.8,
    stage: "proposal",
    owner: "Мария Орлова",
    updatedAt: new Date(now - hourInMs * 4).toISOString(),
    nextReviewAt: new Date(now + dayInMs).toISOString(),
    expectedCloseDate: new Date(now + dayInMs * 3).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/TI.svg",
    riskTags: [
      { id: "risk-3", label: "Высокий чек", tone: "medium" },
    ],
    priorityTag: { label: "Высокий", level: "high" },
    quickTags: [
      { id: "product-dms", label: "ДМС", tone: "info" },
      { id: "segment-tech", label: "Технологии" },
    ],
  },
  {
    id: "deal-4",
    name: "Страхование склада",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    value: 450000,
    probability: 0.9,
    stage: "closedWon",
    owner: "Анна Савельева",
    updatedAt: new Date(now - dayInMs * 3).toISOString(),
    nextReviewAt: new Date(now - dayInMs * 2).toISOString(),
    expectedCloseDate: new Date(now - dayInMs * 5).toISOString(),
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
    avatarUrl: "https://avatars.dicebear.com/api/initials/AL.svg",
    riskTags: [
      { id: "risk-4", label: "Истёкший полис", tone: "critical" },
    ],
    priorityTag: { label: "Низкий", level: "low" },
    quickTags: [
      { id: "product-property", label: "Имущество" },
    ],
  },
];

export const dealDetailsMock: Record<string, DealDetailsData> = {
  "deal-1": {
    id: "deal-1",
    name: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    stage: "qualification",
    value: 1200000,
    probability: 0.65,
    expectedCloseDate: new Date(now + dayInMs * 14).toISOString(),
    nextReviewAt: new Date(now + dayInMs * 2).toISOString(),
    updatedAt: new Date(now - hourInMs).toISOString(),
    owner: "Анна Савельева",
    avatarUrl: "https://avatars.dicebear.com/api/initials/AL.svg",
    riskTags: [
      { id: "risk-1", label: "Просроченный платёж", tone: "high" },
      { id: "risk-1-2", label: "Не подтверждена документация", tone: "medium" },
    ],
    priorityTag: { label: "Высокий приоритет", level: "high", reason: "Важный корпоративный клиент" },
    quickTags: [
      { id: "product-dms", label: "ДМС", tone: "info" },
      { id: "segment-b2b", label: "B2B" },
      { id: "renewal", label: "Продление" },
    ],
    overview: {
      metrics: [
        { id: "amount", label: "Сумма сделки", value: "1 200 000 ₽" },
        { id: "probability", label: "Вероятность закрытия", value: "65%" },
        {
          id: "next-review",
          label: "Следующий просмотр",
          value: new Intl.DateTimeFormat("ru-RU", { dateStyle: "medium" }).format(new Date(now + dayInMs * 2)),
          hint: "Обязательно к обновлению",
        },
      ],
      nextEvents: [
        {
          id: "next-step",
          label: "Созвон по условиям",
          date: new Date(now + dayInMs).toISOString(),
          isSoon: true,
        },
        {
          id: "next-review",
          label: "Следующий обзор",
          date: new Date(now + dayInMs * 2).toISOString(),
        },
      ],
      warnings: [
        {
          id: "warning-payment",
          label: "Просрочен платёж #3",
          severity: "critical",
          description: "Требуется связаться с клиентом",
        },
      ],
      lastInteractions: [
        {
          id: "activity-1",
          title: "Звонок с финансовым директором",
          occurredAt: new Date(now - hourInMs * 3).toISOString(),
          author: "Анна Савельева",
          channel: "call",
          excerpt: "Обсудили корректировки по рискам",
        },
        {
          id: "activity-2",
          title: "Комментарий от исполнителя",
          occurredAt: new Date(now - hourInMs * 6).toISOString(),
          author: "Мария Орлова",
          channel: "note",
          excerpt: "Обновила расчёт программы",
        },
      ],
      confirmedPayments: [
        {
          id: "confirmed-1",
          amount: 350000,
          currency: "RUB",
          paidAtActual: new Date(now - dayInMs).toISOString(),
          recordedBy: {
            id: "user-1",
            name: "Игорь Миронов",
            title: "Финансовый менеджер",
          },
          comment: "Средства поступили на расчётный счёт",
        },
      ],
      currentPolicyId: "policy-1",
    },
    forms: [
      {
        id: "core",
        title: "Основные данные",
        fields: [
          {
            id: "name",
            label: "Название сделки",
            type: "text",
            value: "Корпоративная страховка",
            required: true,
          },
          {
            id: "nextReviewAt",
            label: "Следующий просмотр",
            type: "date",
            value: new Date(now + dayInMs * 2).toISOString().slice(0, 10),
            required: true,
          },
          {
            id: "owner",
            label: "Ответственный",
            type: "text",
            value: "Анна Савельева",
          },
        ],
      },
      {
        id: "finance",
        title: "Финансовые параметры",
        collapsedByDefault: true,
        fields: [
          {
            id: "value",
            label: "Сумма",
            type: "currency",
            value: "1200000",
            required: true,
          },
          {
            id: "probability",
            label: "Вероятность",
            type: "number",
            value: "65",
          },
        ],
      },
      {
        id: "widgets",
        title: "Дополнительные виджеты",
        fields: [
          {
            id: "ai-suggestion",
            label: "Рекомендации ИИ",
            type: "textarea",
            value: "Предложите клиенту пакет расширенного покрытия",
            disabled: true,
            hint: "Доступно при активном фиче-флаге",
          },
        ],
      },
    ],
    calculations: [
      {
        id: "calc-1",
        insurer: "АльфаСтрахование",
        program: "Корпоративное здоровье",
        premium: 450000,
        currency: "RUB",
        period: "01.01.2025 — 31.12.2025",
        status: "ready",
        policyId: "policy-1",
        updatedAt: new Date(now - hourInMs * 4).toISOString(),
        files: [
          {
            id: "file-1",
            name: "calc-ready.xlsx",
            size: 120_000,
            uploadedAt: new Date(now - hourInMs * 5).toISOString(),
            uploadedBy: "Мария Орлова",
          },
        ],
        tags: [
          { id: "status-ready", label: "Готово", tone: "success" },
          { id: "await-confirm", label: "Ожидает подтверждения", tone: "warning" },
        ],
      },
      {
        id: "calc-2",
        insurer: "Ингосстрах",
        program: "Расширенный пакет",
        premium: 620000,
        currency: "RUB",
        period: "01.01.2025 — 31.12.2025",
        status: "pending",
        updatedAt: new Date(now - hourInMs * 10).toISOString(),
        files: [
          {
            id: "file-2",
            name: "draft.pdf",
            size: 52_000,
            uploadedAt: new Date(now - hourInMs * 11).toISOString(),
            uploadedBy: "Мария Орлова",
          },
        ],
        tags: [
          { id: "draft", label: "Черновик", tone: "warning" },
        ],
      },
    ],
    policies: [
      {
        id: "policy-1",
        number: "POL-2024-001",
        product: "Корпоративное здоровье",
        status: "active",
        periodStart: new Date(now - dayInMs * 30).toISOString(),
        periodEnd: new Date(now + dayInMs * 335).toISOString(),
        premium: 980000,
        currency: "RUB",
        owner: "Анна Савельева",
        highlight: true,
        badges: [
          { id: "policy-current", label: "Текущий", tone: "success" },
        ],
        payments: [
          {
            id: "payment-1",
            number: "001",
            plannedDate: new Date(now - dayInMs * 5).toISOString(),
            actualDate: new Date(now - dayInMs * 3).toISOString(),
            amount: 350000,
            currency: "RUB",
            confirmationStatus: "confirmed",
            responsible: "Игорь Миронов",
            tags: [
              { id: "confirmed", label: "Подтверждено", tone: "success" },
            ],
            incomes: [
              {
                id: "income-1",
                kind: "income",
                title: "Оплата клиента",
                plannedAmount: 350000,
                actualAmount: 350000,
                status: "approved",
              },
            ],
            expenses: [
              {
                id: "expense-1",
                kind: "expense",
                title: "Комиссия исполнителя",
                plannedAmount: 85000,
                actualAmount: 80000,
                status: "approved",
              },
            ],
            timeline: [
              {
                id: "timeline-1",
                label: "Создан платёж",
                at: new Date(now - dayInMs * 6).toISOString(),
                user: "Анна Савельева",
              },
              {
                id: "timeline-2",
                label: "Подтвержден",
                at: new Date(now - dayInMs * 3).toISOString(),
                user: "Игорь Миронов",
                comment: "Средства зачислены",
              },
            ],
          },
          {
            id: "payment-2",
            number: "002",
            plannedDate: new Date(now + dayInMs * 30).toISOString(),
            amount: 320000,
            currency: "RUB",
            confirmationStatus: "expected",
            tags: [
              { id: "expected", label: "Ожидается", tone: "warning" },
            ],
            incomes: [
              {
                id: "income-2",
                kind: "income",
                title: "Отложенный платёж",
                plannedAmount: 320000,
                status: "pending",
              },
            ],
            expenses: [],
            timeline: [
              {
                id: "timeline-3",
                label: "Запланирован",
                at: new Date(now - dayInMs).toISOString(),
                user: "Анна Савельева",
              },
            ],
          },
        ],
      },
      {
        id: "policy-archived",
        number: "POL-2023-010",
        product: "Корпоративное здоровье",
        status: "archived",
        periodStart: new Date(now - dayInMs * 400).toISOString(),
        periodEnd: new Date(now - dayInMs * 30).toISOString(),
        premium: 920000,
        currency: "RUB",
        owner: "Анна Савельева",
        badges: [
          { id: "archive", label: "Архив", tone: "warning" },
        ],
        payments: [],
      },
    ],
    actions: {
      shortcuts: [
        {
          id: "create-task",
          label: "Создать задачу",
          intent: "task",
          description: "Назначить исполнителю новое действие",
        },
        {
          id: "send-email",
          label: "Отправить письмо",
          intent: "email",
          description: "Через интеграцию с почтой",
        },
        {
          id: "request-docs",
          label: "Запросить документы",
          intent: "documents",
          description: "Отправить ссылку клиенту",
        },
      ],
      integrations: [
        {
          id: "analytics",
          label: "Аналитика продаж",
          description: "Экспортировать в BI",
          status: "ready",
          actionLabel: "Открыть",
        },
        {
          id: "tasks-service",
          label: "Автоматические действия",
          description: "Пауза интеграции",
          status: "error",
          errorMessage: "RabbitMQ недоступен",
        },
      ],
      banners: [
        {
          id: "integration-error",
          type: "warning",
          message: "Интеграция с сервисом задач недоступна. Повторите позже.",
        },
      ],
    },
    tasksBoard: {
      filters: {
        types: [
          { id: "call", label: "Звонки", active: true },
          { id: "meeting", label: "Встречи", active: false },
          { id: "document", label: "Документы", active: true },
        ],
        showForeign: false,
      },
      lanes: [
        {
          id: "assigned",
          title: "Назначенные",
          hint: "Активные задачи исполнителя",
          emptyCta: "Запланировать задачу",
          tasks: [
            {
              id: "task-1",
              title: "Подготовить обновлённый расчёт",
              dueDate: new Date(now + hourInMs * 8).toISOString(),
              owner: "Мария Орлова",
              stage: "in_progress",
              type: "document",
              checklist: [
                { id: "check-1", label: "Собрать данные", completed: true },
                { id: "check-2", label: "Согласовать с юристом", completed: false },
              ],
              journalLinkId: "activity-2",
            },
          ],
        },
        {
          id: "waiting",
          title: "К исполнению",
          hint: "Ожидают принятия",
          emptyCta: "Настроить автогенерацию",
          tasks: [
            {
              id: "task-2",
              title: "Созвон с клиентом",
              dueDate: new Date(now + dayInMs).toISOString(),
              owner: "Анна Савельева",
              stage: "todo",
              type: "call",
              checklist: [],
              journalLinkId: "activity-1",
            },
          ],
        },
        {
          id: "archive",
          title: "Архив",
          hint: "Закрытые задачи",
          emptyCta: "Нет закрытых задач",
          tasks: [],
        },
      ],
    },
    documentsV2: [
      {
        id: "agreement",
        title: "Договор",
        documents: [
          {
            id: "doc-main",
            name: "Основной договор.pdf",
            type: "PDF",
            size: 1_024_000,
            category: "Договор",
            uploadedAt: new Date(now - dayInMs).toISOString(),
            uploadedBy: "Анна Савельева",
            reviewStatus: "approved",
            reviewer: "Юлия Самойлова",
            reviewComment: "Проверено",
            versions: [
              {
                id: "doc-main-v2",
                version: 2,
                uploadedAt: new Date(now - dayInMs).toISOString(),
                uploadedBy: "Анна Савельева",
                size: 1_024_000,
              },
              {
                id: "doc-main-v1",
                version: 1,
                uploadedAt: new Date(now - dayInMs * 3).toISOString(),
                uploadedBy: "Анна Савельева",
                size: 980_000,
                comment: "Черновик",
              },
            ],
          },
        ],
      },
      {
        id: "consents",
        title: "Согласия",
        documents: [
          {
            id: "doc-consent",
            name: "Согласие на обработку.docx",
            type: "DOCX",
            size: 250_000,
            category: "Согласия",
            uploadedAt: new Date(now - hourInMs * 12).toISOString(),
            uploadedBy: "Кира Лапина",
            reviewStatus: "pending",
            versions: [
              {
                id: "doc-consent-v1",
                version: 1,
                uploadedAt: new Date(now - hourInMs * 12).toISOString(),
                uploadedBy: "Кира Лапина",
                size: 250_000,
              },
            ],
          },
        ],
      },
      {
        id: "materials",
        title: "Дополнительные материалы",
        documents: [],
      },
    ],
    finance: {
      lastUpdated: new Date(now - hourInMs).toISOString(),
      metrics: [
        {
          id: "total-accrued",
          label: "Всего начислено",
          amount: 980000,
          currency: "RUB",
          linkToPayments: true,
        },
        {
          id: "received",
          label: "Получено",
          amount: 350000,
          currency: "RUB",
          linkToPayments: true,
        },
        {
          id: "agent-commission",
          label: "Комиссия агента",
          amount: 120000,
          currency: "RUB",
        },
        {
          id: "executor-expenses",
          label: "Расходы исполнителя",
          amount: 80000,
          currency: "RUB",
        },
        {
          id: "pending",
          label: "Ожидает подтверждения",
          amount: 320000,
          currency: "RUB",
          linkToPayments: true,
        },
      ],
      exportAvailable: true,
    },
    activity: [
      {
        id: "activity-1",
        type: "meeting",
        author: "Анна Савельева",
        message: "Провели встречу с клиентом, согласовали покрытие",
        createdAt: new Date(now - hourInMs * 3).toISOString(),
        clientId: "client-1",
        dealId: "deal-1",
      },
      {
        id: "activity-2",
        type: "system",
        author: "CRM",
        message: "Задача \"Подготовить обновлённый расчёт\" создана автоматически",
        createdAt: new Date(now - hourInMs * 5).toISOString(),
        clientId: "client-1",
        dealId: "deal-1",
      },
      {
        id: "activity-3",
        type: "email",
        author: "Мария Орлова",
        message: "Отправлено письмо с презентацией программы",
        createdAt: new Date(now - hourInMs * 8).toISOString(),
        clientId: "client-1",
        dealId: "deal-1",
      },
    ],
  },
};

export const clientsMock: Client[] = [
  {
    id: "client-1",
    name: "ООО «Альфа Логистик»",
    email: "info@alpha-log.ru",
    phone: "+7 495 100-20-30",
    industry: "Логистика",
    city: "Москва",
    totalDeals: 6,
    lifetimeValue: 5200000,
    lastActivityAt: new Date().toISOString(),
  },
  {
    id: "client-2",
    name: "ИП Петров",
    email: "sales@petrov-ip.ru",
    phone: "+7 812 700-80-90",
    industry: "Розница",
    city: "Санкт-Петербург",
    totalDeals: 2,
    lifetimeValue: 430000,
    lastActivityAt: new Date(Date.now() - 1000 * 60 * 60 * 48).toISOString(),
  },
  {
    id: "client-3",
    name: "АО «Тех Инновации»",
    email: "cto@techinno.ru",
    phone: "+7 383 600-70-80",
    industry: "ИТ",
    city: "Новосибирск",
    totalDeals: 4,
    lifetimeValue: 1680000,
    lastActivityAt: new Date(Date.now() - 1000 * 60 * 60 * 24 * 6).toISOString(),
  },
];

export const tasksMock: Task[] = [
  {
    id: "task-1",
    title: "Назначить встречу по условиям страхования",
    dueDate: new Date(Date.now() + 1000 * 60 * 60 * 12).toISOString(),
    status: "in_progress",
    completed: false,
    owner: "Анна Савельева",
    type: "meeting",
    tags: ["страхование", "встреча"],
    dealId: "deal-1",
    clientId: "client-1",
    reminderAt: new Date(Date.now() + 1000 * 60 * 30).toISOString(),
  },
  {
    id: "task-2",
    title: "Подготовить КП по новому пакету ДМС",
    dueDate: new Date(Date.now() + 1000 * 60 * 60 * 36).toISOString(),
    status: "waiting",
    completed: false,
    owner: "Мария Орлова",
    type: "document",
    tags: ["ДМС", "коммерческое предложение"],
    dealId: "deal-3",
    clientId: "client-3",
  },
  {
    id: "task-3",
    title: "Отправить напоминание об оплате",
    dueDate: new Date(Date.now() - 1000 * 60 * 60 * 6).toISOString(),
    status: "new",
    completed: false,
    owner: "Иван Плахов",
    type: "reminder",
    tags: ["оплата", "напоминание"],
    dealId: "deal-2",
    clientId: "client-2",
    reminderAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
  },
  {
    id: "task-4",
    title: "Загрузить подписанные документы",
    dueDate: new Date(Date.now() - 1000 * 60 * 60 * 30).toISOString(),
    status: "done",
    completed: true,
    owner: "Анна Савельева",
    type: "document",
    tags: ["документы"],
    dealId: "deal-4",
    clientId: "client-1",
  },
];

const minutesInMs = 60_000;

export const paymentsMock: Payment[] = [
  {
    id: "payment-1",
    dealId: "deal-4",
    dealName: "Страхование склада",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    policyId: "policy-1",
    policyNumber: "CR-2024-0001",
    sequence: 1,
    amount: 450000,
    plannedAmount: 450000,
    currency: "RUB",
    status: "received",
    confirmationStatus: "confirmed",
    actualAmount: 452000,
    paidAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24 * 5).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 7).toISOString(),
    actualDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    comment: "Основная премия по полису",
    incomesTotal: 450000,
    expensesTotal: 0,
    netTotal: 450000,
    incomes: [
      {
        id: "income-1",
        paymentId: "payment-1",
        amount: 450000,
        plannedAmount: 450000,
        actualAmount: 450000,
        currency: "RUB",
        category: "client_payment",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        actualPostedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        note: "Поступление от клиента",
        status: "confirmed",
        adjustmentReason: "confirmation",
        attachments: [],
        history: [
          {
            id: "income-history-1",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
            changedBy: "Анна Савельева",
            plannedAmount: 450000,
            actualAmount: 450000,
            reason: "confirmation",
            note: "Поступление от клиента",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        createdBy: "Анна Савельева",
        updatedBy: "Анна Савельева",
      },
    ],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 10).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    recordedBy: "Анна Савельева",
    recordedByRole: "Главный админ",
    updatedBy: "Анна Савельева",
    history: [
      {
        id: "payment-1-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 9).toISOString(),
        changedBy: "Иван Плахов",
        reason: "Уточнили плановую сумму после согласования с клиентом",
        snapshot: {
          plannedAmount: 440000,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 8).toISOString(),
          status: "expected",
        },
      },
      {
        id: "payment-1-v2",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        changedBy: "Анна Савельева",
        reason: "Поступление подтверждено бухгалтерией",
        snapshot: {
          plannedAmount: 450000,
          actualAmount: 452000,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 7).toISOString(),
          actualDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
          status: "received",
        },
      },
    ],
  },
  {
    id: "payment-2",
    dealId: "deal-2",
    dealName: "Обновление полиса КАСКО",
    clientId: "client-2",
    clientName: "ИП Петров",
    policyId: "policy-2",
    policyNumber: "CR-2024-0042",
    sequence: 2,
    amount: 210000,
    plannedAmount: 210000,
    currency: "RUB",
    status: "expected",
    confirmationStatus: "pending",
    dueDate: new Date(Date.now() + minutesInMs * 60 * 72).toISOString(),
    plannedDate: new Date(Date.now() + minutesInMs * 60 * 48).toISOString(),
    comment: "Частичная оплата премии",
    incomesTotal: 120000,
    expensesTotal: 15000,
    netTotal: 105000,
        incomes: [
      {
        id: "income-2",
        paymentId: "payment-2",
        amount: 120000,
        plannedAmount: 120000,
        actualAmount: null,
        currency: "RUB",
        category: "advance",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        note: "Авансовый платёж",
        status: "pending_confirmation",
        adjustmentReason: null,
        attachments: [
          {
            id: "income-attachment-1",
            fileName: "receipt-advance.pdf",
            fileSize: 128000,
            uploadedAt: new Date(Date.now() - minutesInMs * 60 * 10).toISOString(),
            uploadedBy: "Иван Плахов",
            url: "https://example.com/receipt-advance.pdf",
          },
        ],
        history: [
          {
            id: "income-history-2",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
            changedBy: "Иван Плахов",
            plannedAmount: 120000,
            actualAmount: null,
            reason: "initial_planning",
            note: "Авансовый платёж",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        createdBy: "Иван Плахов",
        updatedBy: "Иван Плахов",
      },
    ],
    expenses: [
      {
        id: "expense-1",
        paymentId: "payment-2",
        amount: 15000,
        plannedAmount: 15000,
        actualAmount: null,
        currency: "RUB",
        category: "agent_fee",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        note: "Комиссия агента",
        status: "pending_confirmation",
        adjustmentReason: null,
        attachments: [
          {
            id: "expense-attachment-1",
            fileName: "agent-fee.docx",
            fileSize: 64000,
            uploadedAt: new Date(Date.now() - minutesInMs * 60 * 5).toISOString(),
            uploadedBy: "Иван Плахов",
          },
        ],
        history: [
          {
            id: "expense-history-1",
            changedAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
            changedBy: "Иван Плахов",
            plannedAmount: 15000,
            actualAmount: null,
            reason: "initial_planning",
            note: "Комиссия агента",
          },
        ],
        createdAt: new Date(Date.now() - minutesInMs * 60 * 6).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 3).toISOString(),
        createdBy: "Иван Плахов",
        updatedBy: "Иван Плахов",
      },
    ],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 5).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 3).toISOString(),
    updatedBy: "Иван Плахов",
    history: [
      {
        id: "payment-2-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 4).toISOString(),
        changedBy: "Иван Плахов",
        reason: "Сдвинули дату по просьбе клиента",
        snapshot: {
          plannedAmount: 200000,
          plannedDate: new Date(Date.now() + minutesInMs * 60 * 24).toISOString(),
          status: "planned",
        },
      },
    ],
  },
  {
    id: "payment-3",
    dealId: "deal-3",
    dealName: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    policyId: "policy-3",
    policyNumber: "CR-2024-0128",
    sequence: 1,
    amount: 980000,
    plannedAmount: 980000,
    currency: "RUB",
    status: "cancelled",
    confirmationStatus: "pending",
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 48).toISOString(),
    comment: "Оплата отменена по запросу клиента",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 8).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
    recordedBy: undefined,
    recordedByRole: undefined,
    updatedBy: "Мария Орлова",
    history: [
      {
        id: "payment-3-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
        changedBy: "Мария Орлова",
        reason: "Платёж отменён, ожидаем новый график",
        snapshot: {
          plannedAmount: 980000,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 48).toISOString(),
          status: "cancelled",
        },
      },
    ],
  },
  {
    id: "payment-4",
    dealId: "deal-1",
    dealName: "Корпоративная страховка",
    clientId: "client-1",
    clientName: "ООО «Альфа Логистик»",
    policyId: "policy-4",
    policyNumber: "CR-2024-0020",
    sequence: 3,
    amount: 320000,
    plannedAmount: 320000,
    currency: "RUB",
    status: "planned",
    confirmationStatus: "pending",
    dueDate: new Date(Date.now() + minutesInMs * 60 * 24 * 21).toISOString(),
    plannedDate: new Date(Date.now() + minutesInMs * 60 * 24 * 18).toISOString(),
    comment: "Рассрочка на три части",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    history: [],
  },
  {
    id: "payment-5",
    dealId: "deal-3",
    dealName: "Продление ДМС",
    clientId: "client-3",
    clientName: "АО «Тех Инновации»",
    policyId: "policy-3",
    policyNumber: "CR-2024-0128",
    sequence: 2,
    amount: 120000,
    plannedAmount: 120000,
    currency: "RUB",
    status: "paid_out",
    confirmationStatus: "confirmed",
    actualAmount: 118500,
    paidAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    dueDate: new Date(Date.now() - minutesInMs * 60 * 24 * 2).toISOString(),
    plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 3).toISOString(),
    actualDate: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    comment: "Возврат комиссии",
    incomesTotal: 0,
    expensesTotal: 120000,
    netTotal: -120000,
    incomes: [],
    expenses: [
      {
        id: "expense-2",
        paymentId: "payment-5",
        amount: 120000,
        currency: "RUB",
        category: "refund",
        postedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        note: "Возврат клиенту",
        createdAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        updatedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
        createdBy: "Мария Орлова",
        updatedBy: "Мария Орлова",
      },
    ],
    createdAt: new Date(Date.now() - minutesInMs * 60 * 24 * 6).toISOString(),
    updatedAt: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
    recordedBy: "Мария Орлова",
    recordedByRole: "Исполнитель",
    updatedBy: "Мария Орлова",
    history: [
      {
        id: "payment-5-v1",
        changedAt: new Date(Date.now() - minutesInMs * 60 * 24).toISOString(),
        changedBy: "Мария Орлова",
        reason: "Подтвердили выплату страховой",
        snapshot: {
          plannedAmount: 120000,
          actualAmount: 118500,
          plannedDate: new Date(Date.now() - minutesInMs * 60 * 24 * 3).toISOString(),
          actualDate: new Date(Date.now() - minutesInMs * 60 * 12).toISOString(),
          status: "paid_out",
        },
      },
    ],
  },
];

export const activitiesMock: ActivityLogEntry[] = [
  {
    id: "activity-1",
    type: "email",
    author: "Анна Савельева",
    message: "Отправлено уточнение условий страхования",
    createdAt: new Date(Date.now() - 1000 * 60 * 45).toISOString(),
    clientId: "client-1",
    dealId: "deal-1",
  },
  {
    id: "activity-2",
    type: "meeting",
    author: "Мария Орлова",
    message: "Созвон с клиентом по доработке КП",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 5).toISOString(),
    clientId: "client-3",
    dealId: "deal-3",
  },
  {
    id: "activity-3",
    type: "system",
    author: "Система",
    message: "Напоминание о просроченном платеже",
    createdAt: new Date(Date.now() - 1000 * 60 * 60 * 2).toISOString(),
    clientId: "client-2",
    dealId: "deal-2",
  },
];
