import type { Client, Deal, DealStageMetrics, Payment, Task } from "@/types/crm";

export const dealsFixture: Deal[] = [
  {
    id: "deal-2",
    name: "Добровольное страхование сотрудников",
    clientId: "client-2",
    clientName: "АО «Север»",
    probability: 0.35,
    stage: "qualification",
    owner: "manager-petrov",
    updatedAt: "2024-01-12T12:00:00.000Z",
    nextReviewAt: "2024-01-20T12:00:00.000Z",
    expectedCloseDate: "2024-02-15T00:00:00.000Z",
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
  {
    id: "deal-3",
    name: "Страхование автопарка",
    clientId: "client-1",
    clientName: "ООО «Ромашка»",
    probability: 0.8,
    stage: "proposal",
    owner: "manager-ivanov",
    updatedAt: "2024-01-10T09:00:00.000Z",
    nextReviewAt: "2024-01-25T08:00:00.000Z",
    expectedCloseDate: "2024-02-20T00:00:00.000Z",
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
  {
    id: "deal-1",
    name: "Страхование офиса",
    clientId: "client-1",
    clientName: "ООО «Ромашка»",
    probability: 0.55,
    stage: "negotiation",
    owner: "manager-ivanov",
    updatedAt: "2024-01-05T10:00:00.000Z",
    nextReviewAt: "2024-02-10T10:00:00.000Z",
    expectedCloseDate: "2024-03-01T00:00:00.000Z",
    tasks: [],
    notes: [],
    documents: [],
    payments: [],
    activity: [],
  },
];

type ExtendedStageMetric = DealStageMetrics & { totalValue: number };

export const stageMetricsFixture: ExtendedStageMetric[] = [
  { stage: "qualification", count: 2, totalValue: 450_000, conversionRate: 1, avgCycleDurationDays: 9 },
  { stage: "negotiation", count: 1, totalValue: 180_000, conversionRate: 0.5, avgCycleDurationDays: 14 },
  { stage: "proposal", count: 1, totalValue: 320_000, conversionRate: 0.5, avgCycleDurationDays: 11 },
  { stage: "closedWon", count: 1, totalValue: 520_000, conversionRate: 0.4, avgCycleDurationDays: 18 },
  { stage: "closedLost", count: 0, totalValue: 0, conversionRate: 0, avgCycleDurationDays: null },
];

export const clientsFixture: Client[] = [
  {
    id: "client-1",
    name: "ООО «Ромашка»",
    email: "info@romashka.example",
    phone: "+7 495 000-00-01",
    industry: "Страхование",
    city: "Москва",
    totalDeals: 3,
    lifetimeValue: 780_000,
    lastActivityAt: "2024-01-12T09:30:00.000Z",
    status: "active",
    segment: "vip",
    kycStatus: "verified",
    owner: "manager-ivanov",
    tags: ["приоритет"],
    contacts: [
      { id: "contact-1", type: "email", label: "Email", value: "info@romashka.example", primary: true },
    ],
  },
  {
    id: "client-2",
    name: "АО «Север»",
    email: "office@sever.example",
    phone: "+7 812 000-00-02",
    industry: "Производство",
    city: "Санкт-Петербург",
    totalDeals: 1,
    lifetimeValue: 450_000,
    lastActivityAt: "2024-01-11T11:00:00.000Z",
    status: "active",
    segment: "mid-market",
    kycStatus: "in_review",
    owner: "manager-petrov",
    tags: ["перспектива"],
    contacts: [
      { id: "contact-2", type: "phone", label: "Основной", value: "+7 812 000-00-02", primary: true },
    ],
  },
];

export const tasksFixture: Task[] = [
  {
    id: "task-1",
    title: "Позвонить по продлению",
    dueDate: "2024-01-22T09:00:00.000Z",
    status: "new",
    completed: false,
    owner: "manager-ivanov",
    type: "call",
    tags: ["продление"],
    dealId: "deal-1",
    clientId: "client-1",
  },
  {
    id: "task-2",
    title: "Отправить КП",
    dueDate: "2024-01-23T10:00:00.000Z",
    status: "in_progress",
    completed: false,
    owner: "manager-petrov",
    type: "document",
    tags: ["коммерческое предложение"],
    dealId: "deal-2",
    clientId: "client-2",
  },
];

export const paymentsFixture: Payment[] = [
  {
    id: "payment-1",
    dealId: "deal-1",
    dealName: "Страхование офиса",
    clientId: "client-1",
    clientName: "ООО «Ромашка»",
    policyId: "policy-1",
    policyNumber: "P-10001",
    sequence: 1,
    amount: 320_000,
    plannedAmount: 320_000,
    currency: "RUB",
    status: "planned",
    confirmationStatus: "pending",
    dueDate: "2024-02-10T00:00:00.000Z",
    plannedDate: "2024-02-10T00:00:00.000Z",
    incomesTotal: 0,
    expensesTotal: 0,
    netTotal: 0,
    incomes: [],
    expenses: [],
    createdAt: "2024-01-05T10:00:00.000Z",
    updatedAt: "2024-01-05T10:00:00.000Z",
    history: [],
  },
];

export const apiFixtures = {
  deals: dealsFixture,
  stageMetrics: stageMetricsFixture,
  clients: clientsFixture,
  tasks: tasksFixture,
  payments: paymentsFixture,
};
