# Reports Service

## Назначение
Reports предназначен для агрегирования показателей и подготовки аналитических отчётов поверх данных CRM, но на текущем этапе реализована только заглушка без полноценного функционала.【F:README.md†L53-L74】

## Требования к окружению
- Планируется Python/TypeScript стек в зависимости от выбранной BI-платформы (уточняется в архитектурном ревью).
- Доступ к агрегированным представлениям Audit и CRM (PostgreSQL) и каналам RabbitMQ для событий, когда сервис будет реализован.【F:docs/tech-stack.md†L351-L353】
- Переменные окружения `REPORTS_SERVICE_PORT`, `REPORTS_DATABASE_URL`, `REPORTS_SOURCE_SCHEMAS` зарезервированы в [`env.example`](../../env.example).

## Локальный запуск
Пока сервис не реализован, используйте заглушку:
```bash
python -m http.server "${REPORTS_SERVICE_PORT:-8087}"
```
или подключите временный мок к Gateway. После реализации замените на фактический стартовый скрипт (например, FastAPI/Next.js).

## Миграции и скрипты
- Каталог [`migrations`](migrations/) отведён под будущие SQL/ETL-скрипты. Храните здесь DDL для материализованных представлений и cron-скрипты выгрузок.
- Расчётные джобы, потребляющие данные Audit, следует описывать в `scripts/` (создать по мере необходимости).【F:docs/tech-stack.md†L351-L353】

## Запуск в Docker
- Временно используйте базовый образ:
  ```bash
  docker run --rm -p ${REPORTS_SERVICE_PORT:-8087}:8087 nginx:alpine
  ```
  Команда поднимает статическую заглушку. После появления реализации добавьте профиль в `infra/docker-compose.yml` и полноценный Dockerfile.

## Полезные ссылки
- Общее описание домена и текущие ограничения: [`README.md`](../../README.md#4-ответственность-сервисов).【F:README.md†L53-L74】
- Источник агрегированных событий в Audit: [`docs/tech-stack.md`](../../docs/tech-stack.md#audit).【F:docs/tech-stack.md†L351-L353】
