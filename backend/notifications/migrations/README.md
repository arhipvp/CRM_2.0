# Миграции схемы `notifications`

## Порядок миграций

> ⚠️ Физические файлы миграций ещё не добавлены. Ниже перечислены запланированные ревизии, которые появятся вместе с реализацией сервиса.

1. `20240117130000_create_notifications.sql` (планируется) — таблица `notifications`, индексы по статусу и каналу.
2. `20240117132000_create_delivery_attempts.sql` (планируется) — таблица `delivery_attempts`, внешние ключи на уведомления.
3. `20240117134000_create_templates.sql` (планируется) — таблицы `templates` и `channel_settings`.
4. `20240117140000_seed_notification_templates.sql` (планируется) — базовые шаблоны (создание сделки, просрочка задачи, подтверждение платежа).

## Правила версионирования

* Используется формат `YYYYMMDDHHMMSS_описание.sql`.
* Каждая миграция должна быть обратимой: для `templates` и `channel_settings` предоставляется скрипт отката.
* При добавлении новых каналов обновляются конфигурации rate limiting и таблица `channel_settings` в одном релизе.
