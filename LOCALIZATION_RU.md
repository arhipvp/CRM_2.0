# Русификация десктопного приложения CRM

**Дата:** 2025-10-24
**Статус:** ✅ ЗАВЕРШЕНА

---

## Обзор

Десктопное приложение CRM было полностью русифицировано. Все элементы пользовательского интерфейса теперь отображаются на русском языке.

## Созданные/Модифицированные файлы

### Новые файлы

1. **`desktop_app/i18n.py`** - Модуль локализации (интернационализации)
   - Содержит словарь русских переводов всех UI строк
   - Класс `I18n` для получения переводов
   - Глобальный экземпляр `i18n` для использования во всех модулях

### Модифицированные файлы

2. **`desktop_app/main.py`**
   - Заголовок приложения: "CRM Desktop Application" → "CRM Система управления"
   - Названия вкладок локализированы
   - Все кнопки, метки и диалоги локализированы

3. **`desktop_app/tasks_tab.py`**
   - Заголовки столбцов (Title, Status, Priority, Due Date, Deleted)
   - Текст кнопок (Add Task, Edit, Delete, Refresh, Export)
   - Сообщения об успехе/ошибке

4. **`desktop_app/policies_tab.py`**
   - Заголовки столбцов (Policy Number, Status, Premium, Effective From/To, Deleted)
   - Текст кнопок и диалогов

5. **`desktop_app/calculations_tab.py`**
   - Селектор сделки (Select Deal → Выбрать сделку)
   - Заголовки столбцов (Insurance Company, Program Name, Premium Amount, Coverage Sum)
   - Фильтры (Filters, Status)
   - Все кнопки и сообщения

6. **`desktop_app/deals_tab.py`**
   - Заголовки столбцов (Deal Title, Client, Status, Amount)
   - Все UI элементы локализированы

7. **`desktop_app/login_dialog.py`**
   - Название диалога (Login → Вход)
   - Метки формы (Username → Имя пользователя, Password → Пароль)
   - Кнопки и сообщения об ошибках

8. **`desktop_app/edit_dialogs.py`**
   - Названия диалогов редактирования
   - Метки формы (Title, Description, Status, Amount и т.д.)
   - Сообщения валидации

9. **`desktop_app/detail_dialogs.py`**
   - Названия диалогов деталей (Client Details, Deal Details, Policy Details и т.д.)
   - Все метки полей

---

## Русский словарь переводов

Словарь содержит следующие категории переводов:

### Основные элементы управления
```
"CRM Management System" → "CRM Система управления"
"File" → "Файл"
"Help" → "Справка"
"Exit" → "Выход"
```

### Названия вкладок
```
"Deals" → "Сделки"
"Tasks" → "Задачи"
"Policies" → "Полисы"
"Payments" → "Платежи"
"Calculations" → "Расчеты"
"Deal Journal" → "Журнал сделок"
```

### Общие кнопки
```
"Add" → "Добавить"
"Edit" → "Редактировать"
"Delete" → "Удалить"
"Refresh" → "Обновить"
"Export CSV" → "Экспорт CSV"
"Export Excel" → "Экспорт Excel"
"OK" → "ОК"
"Cancel" → "Отмена"
```

### Диалоги
```
"Success" → "Успех"
"Error" → "Ошибка"
"Warning" → "Предупреждение"
"Confirm" → "Подтверждение"
"Confirm Delete" → "Подтвердить удаление"
```

### Специфичные для сделок (Deals)
```
"Deal Title" → "Название сделки"
"Client" → "Клиент"
"Amount" → "Сумма"
"Start Date" → "Дата начала"
"End Date" → "Дата окончания"
"Notes" → "Заметки"
```

### Специфичные для задач (Tasks)
```
"Task Title" → "Название задачи"
"Priority" → "Приоритет"
"Due Date" → "Срок выполнения"
"Description" → "Описание"
```

### Специфичные для полисов (Policies)
```
"Policy Number" → "Номер полиса"
"Premium" → "Премия"
"Effective From" → "Дата начала действия"
"Effective To" → "Дата окончания действия"
```

### Специфичные для расчетов (Calculations)
```
"Select Deal" → "Выбрать сделку"
"Insurance Company" → "Страховая компания"
"Program Name" → "Название программы"
"Premium Amount" → "Размер премии"
"Coverage Sum" → "Сумма покрытия"
"Comments" → "Комментарии"
```

### Поля и метки
```
"Name" → "Имя"
"Email" → "Электронная почта"
"Phone" → "Телефон"
"Status" → "Статус"
"Created" → "Создана"
"Deleted" → "Удалена"
"Yes" → "Да"
"No" → "Нет"
```

---

## Как использовать локализацию

### Для разработчика

При добавлении нового UI элемента с текстом:

```python
from i18n import i18n

# Вместо:
tk.Button(self, text="Add")

# Используйте:
tk.Button(self, text=i18n("Add"))
```

### Добавление нового перевода

Если нужна локализация новой строки:

1. Откройте `desktop_app/i18n.py`
2. Добавьте новую пару "English" → "Русский" в `TRANSLATIONS_RU`
3. Используйте `i18n("English text")` в коде

Пример:
```python
TRANSLATIONS_RU = {
    # ... существующие переводы ...
    "New feature": "Новая функция",
}
```

---

## Примеры локализации

### Заголовок столбца Treeview
```python
# До локализации:
self.tree.heading("ID", text="ID")

# После локализации:
self.tree.heading("ID", text=i18n("ID"))
```

### Кнопка
```python
# До локализации:
tk.Button(self, text="Add Task", command=self.add_task)

# После локализации:
tk.Button(self, text=i18n("Add Task"), command=self.add_task)
```

### Диалог ошибки
```python
# До локализации:
messagebox.showerror("Error", "Failed to fetch data")

# После локализации:
messagebox.showerror(i18n("Error"), i18n("Failed to fetch data"))
```

### Значения в списке
```python
# До локализации:
values = ["Yes", "No", "Maybe"]

# После локализации:
values = [i18n("Yes"), i18n("No"), "Maybe"]
```

---

## Статистика локализации

| Файл | Количество строк локализации |
|------|------------------------------|
| i18n.py | 134+ переводов |
| main.py | 25+ строк |
| tasks_tab.py | 15+ строк |
| policies_tab.py | 15+ строк |
| calculations_tab.py | 20+ строк |
| deals_tab.py | 15+ строк |
| login_dialog.py | 10+ строк |
| edit_dialogs.py | 30+ строк |
| detail_dialogs.py | 10+ строк |
| **ВСЕГО** | **~275 локализированных строк** |

---

## Результаты

✅ **Полная локализация приложения на русский язык**

Все видимые элементы интерфейса теперь отображаются на русском:
- ✅ Названия вкладок
- ✅ Текст кнопок
- ✅ Заголовки столбцов
- ✅ Названия диалогов
- ✅ Метки формы
- ✅ Сообщения об успехе/ошибке
- ✅ Текст фильтров и селекторов
- ✅ Сообщения подтверждения удаления

---

## Коммиты

**Commit:** `3530e41` - Add Russian localization (i18n) to desktop application

---

## Стратегия расширения локализации

Если в будущем потребуется поддержка других языков:

1. Создайте новый словарь в `i18n.py`:
   ```python
   TRANSLATIONS_EN = { ... }
   TRANSLATIONS_DE = { ... }
   ```

2. Модифицируйте класс `I18n` для выбора языка:
   ```python
   i18n = I18n("ru")  # или "en", "de"
   ```

3. Оставшийся код не потребует изменений - все локализированные строки автоматически переключатся на новый язык.

---

**Статус:** ✅ ГОТОВО К ИСПОЛЬЗОВАНИЮ

Приложение полностью локализировано и готово к использованию русскоговорящими пользователями.
