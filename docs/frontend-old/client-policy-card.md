# Экран «Карточка клиента / полиса»

- **Описание макета:** карточная структура с вкладками клиента, полисов и активности; подробные состояния собраны в `docs/frontend/mockups/client-policy-card/`.
- **Назначение:** единое представление данных клиента, полисов, истории взаимодействий и связанных задач.

## Основные секции
1. **Профиль клиента:** контактные данные, статус KYC, сегмент, быстрый переход к редактированию контактов.
2. **Портфель полисов:** список активных и архивных полисов с ключевыми параметрами, действия «Создать» и «Продлить».
3. **Взаимодействия:** журнал коммуникаций с фильтрами по типу события и пагинацией.
4. **Связанные задачи:** чек-лист действий с отметкой выполнения и календарь напоминаний.

## Пользовательские действия
- Редактирование контактных данных с inline-валидацией и обновлением без перезагрузки.
- Создание нового полиса или продление текущего через модальное окно с базовой валидацией дат и премии.
- Просмотр истории активности с фильтром по типу события и переключаемым размером страницы.
- Отметка задач чек-листа и автоматическое обновление календаря напоминаний.
- Экспорт карточки в PDF из шапки (используется нативная печать браузера).

## Состояния элементов
- **Загрузка:** скелетон профиля и лоадер в таблицах полисов/взаимодействий.
- **Валидация:** обязательные поля (телефон, email) имеют маску ввода и отображают текст ошибки под полем.
- **Ошибки API:** глобальный баннер с описанием проблемы и кнопкой «Повторить», инпуты подсвечиваются только при неверном вводе.
- **Отсутствие данных:** показываются состояния-заглушки с CTA («Добавить полис», «Записать звонок», «Создать задачу»).

## Критерии приёмки
- Изменения контактных данных сохраняются без перезагрузки страницы и подтверждаются уведомлением.
- Журнал взаимодействий поддерживает пагинацию и фильтр по типу, выбранные фильтры сохраняются при возврате на экран.
- Создание нового полиса валидирует даты и уникальность номера, при ошибке сервер возвращает сообщение, отображаемое в модальном окне.
- Пользователь может экспортировать карточку в PDF, содержащий актуальные данные всех секций.

## Требования к доступности
- Все интерактивные элементы доступны через клавиатуру и имеют видимый фокус.
- Таблицы поддерживают озвучивание заголовков и ячеек (атрибуты `scope`, `aria-describedby`).
- Модальные окна ловят фокус и позволяют закрыть окно клавишей `Esc`.
- Цветовые индикаторы статусов дублируются текстом/иконками.
