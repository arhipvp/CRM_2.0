# Карточка сделки с табами и быстрым редактированием

## Краткое описание

Компонент `DealDetails` отображает карточку сделки с вкладками «Журнал», «Задачи», «Документы» и «Финансы». В верхней части карточки расположен блок быстрого редактирования ключевых полей (стадия, сумма, вероятность, предполагаемая дата закрытия и ответственный). Любые сохранённые изменения подсвечиваются, а данные обновляются через React Query и SSE-уведомления.

## Структура экрана

1. **Шапка карточки**
   - Название сделки и ссылка на клиента.
   - Информация о сумме, вероятности, стадии и последнем обновлении.
2. **Быстрые правки**
   - Форма с выпадающим списком стадии и числовыми полями.
   - Кнопки «Сбросить» и «Обновить», отображающие состояние загрузки при сохранении.
3. **Панель действий**
   - Табы для переключения между журналом, задачами, документами и финансовыми показателями.
   - Быстрые действия: «Создать задачу», «Добавить заметку», «Загрузить файл».
4. **Содержимое вкладок**
   - **Журнал** — таймлайн активности и заметок, форма добавления новой записи.
   - **Задачи** — список задач с переключением статуса и формой быстрого создания.
   - **Документы** — карточки загруженных файлов и форма добавления нового документа.
   - **Финансы** — таблица платежей со сводкой по суммам.

## Поведение

- Вкладки загружают данные лениво через React Query, каждая операция (создание задачи, заметки, документа) обновляет кэш соответствующих запросов и карточку сделки.
- SSE-сообщения подсвечивают карточку и сбрасывают подсветку автоматически.
- Быстрые правки обновляют карточку без перезагрузки страницы; в случае отсутствия новой даты закрытия поле очищается.

## Использование в сценариях

- Продавцы и исполнители переключаются между вкладками, чтобы управлять задачами, документами и финансовыми показателями в одном месте.
- Быстрое редактирование экономит время при обновлении ключевых метрик сделки.
