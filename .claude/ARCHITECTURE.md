# Claude Code ÑÑƒĞ±Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ - ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

## ğŸ—ï¸ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CRM Microservices System                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Client Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                      â”‚               â”‚
â”‚   Web Frontend       â”‚  Desktop App         â”‚  Telegram Bot â”‚
â”‚   (Next.js)          â”‚  (Tkinter/Python)    â”‚  (aiogram)    â”‚
â”‚   [:3000]            â”‚  [local]             â”‚  [:8089]      â”‚
â”‚                      â”‚                      â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                      â”‚                   â”‚
           â”‚                      â”‚                   â”‚
           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
           â”‚    â”‚                                     â”‚
           â””â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”˜
                â”‚                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    API Gateway (BFF)                       â”‚
â”‚                    (NestJS, :8080)                         â”‚
â”‚  - Request routing                                         â”‚
â”‚  - Session management                                      â”‚
â”‚  - SSE stream proxying                                     â”‚
â”‚  - Webhook for Telegram                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Authentication   â”‚                          â”‚  Business Logic  â”‚
â”‚  (Auth Service)   â”‚                          â”‚                  â”‚
â”‚  Spring Boot      â”‚                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Kotlin, :8081    â”‚                          â”‚  CRM Service     â”‚
â”‚                   â”‚                          â”‚  (FastAPI)       â”‚
â”‚  - OAuth/OIDC     â”‚                          â”‚  Python, :8082   â”‚
â”‚  - JWT            â”‚                          â”‚                  â”‚
â”‚  - User/Role mgmt â”‚                          â”‚  - Clients       â”‚
â”‚  - RBAC           â”‚                          â”‚  - Deals         â”‚
â”‚                   â”‚                          â”‚  - Payments      â”‚
â”‚                   â”‚                          â”‚  - Policies      â”‚
â”‚                   â”‚                          â”‚  - Celery workersâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚            Supporting Services Layer                   â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                                        â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚ Documents   â”‚  â”‚Notifications â”‚  â”‚   Tasks        â”‚ â”‚
       â”‚  â”‚ (NestJS)    â”‚  â”‚  (NestJS)    â”‚  â”‚  (NestJS)      â”‚ â”‚
       â”‚  â”‚ :8084       â”‚  â”‚  :8085       â”‚  â”‚  :8086         â”‚ â”‚
       â”‚  â”‚             â”‚  â”‚              â”‚  â”‚                â”‚ â”‚
       â”‚  â”‚ - Files     â”‚  â”‚ - SSE        â”‚  â”‚ - Planning     â”‚ â”‚
       â”‚  â”‚ - Storage   â”‚  â”‚ - Telegram   â”‚  â”‚ - Reminders    â”‚ â”‚
       â”‚  â”‚ - ACL       â”‚  â”‚ - Events     â”‚  â”‚ - SLA          â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚                                                        â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
       â”‚  â”‚  Reports    â”‚  â”‚    Audit     â”‚  â”‚    Backup      â”‚ â”‚
       â”‚  â”‚ (FastAPI)   â”‚  â”‚  (NestJS)    â”‚  â”‚     (Bash)     â”‚ â”‚
       â”‚  â”‚ :8087       â”‚  â”‚  :8088       â”‚  â”‚   (Docker)     â”‚ â”‚
       â”‚  â”‚             â”‚  â”‚              â”‚  â”‚                â”‚ â”‚
       â”‚  â”‚ - Analytics â”‚  â”‚ - Logs       â”‚  â”‚ - PostgreSQL   â”‚ â”‚
       â”‚  â”‚ - Views     â”‚  â”‚ - Events     â”‚  â”‚ - Redis        â”‚ â”‚
       â”‚  â”‚ - Metrics   â”‚  â”‚ - Archive    â”‚  â”‚ - RabbitMQ     â”‚ â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
       â”‚                                                        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              Data & Communication Layer                â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚                                                        â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
       â”‚  â”‚         PostgreSQL (Single Cluster)             â”‚  â”‚
       â”‚  â”‚      Separate schema per service                â”‚  â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
       â”‚                                                        â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
       â”‚  â”‚    Redis     â”‚  â”‚   RabbitMQ   â”‚                    â”‚
       â”‚  â”‚  (Caching)   â”‚  â”‚  (Event Bus) â”‚                    â”‚
       â”‚  â”‚  (FSM State) â”‚  â”‚              â”‚                    â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
       â”‚                                                        â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“‹ Ğ¡ÑƒĞ±Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ Ğ¸ Ğ¸Ñ… Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ

### Frontend & Desktop (User Interface)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FRONTEND Subagent                      â”‚
â”‚  - Next.js, React, TypeScript           â”‚
â”‚  - SSR, SSE streams                     â”‚
â”‚  - Tailwind CSS                         â”‚
â”‚  - React Query                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DESKTOP-APP Subagent âœ¨ NEW            â”‚
â”‚  - Python, Tkinter                      â”‚
â”‚  - GUI components                       â”‚
â”‚  - API integration                      â”‚
â”‚  - State management                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API & Routing
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GATEWAY Subagent                       â”‚
â”‚  - NestJS, TypeScript                   â”‚
â”‚  - Request routing                      â”‚
â”‚  - Session management                   â”‚
â”‚  - SSE proxying                         â”‚
â”‚  - Webhook handling                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Core Services
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTH Subagent                          â”‚
â”‚  - Spring Boot, Kotlin                  â”‚
â”‚  - OAuth/OIDC                           â”‚
â”‚  - JWT tokens                           â”‚
â”‚  - User/Role management                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CRM Subagent                           â”‚
â”‚  - FastAPI, Python                      â”‚
â”‚  - Clients, Deals, Payments             â”‚
â”‚  - Celery workers                       â”‚
â”‚  - Business logic                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Supporting Services
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DOCUMENTS   â”‚NOTIFICATIONS â”‚   TASKS      â”‚
â”‚  NestJS      â”‚   NestJS     â”‚  NestJS      â”‚
â”‚              â”‚              â”‚              â”‚
â”‚ - File mgmt  â”‚ - SSE        â”‚ - Planning   â”‚
â”‚ - Storage    â”‚ - Telegram   â”‚ - Reminders  â”‚
â”‚ - ACL        â”‚ - Events     â”‚ - SLA        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   REPORTS    â”‚    AUDIT     â”‚   BACKUP     â”‚
â”‚  FastAPI     â”‚   NestJS     â”‚    Bash      â”‚
â”‚              â”‚              â”‚              â”‚
â”‚ - Analytics  â”‚ - Logs       â”‚ - DB backup  â”‚
â”‚ - Views      â”‚ - Events     â”‚ - S3 sync    â”‚
â”‚ - Metrics    â”‚ - Archive    â”‚ - Restore    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TELEGRAM-BOT Subagent                  â”‚
â”‚  - Python, aiogram                      â”‚
â”‚  - HTTPS webhooks                       â”‚
â”‚  - FSM state management                 â”‚
â”‚  - Rate limiting                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Infrastructure
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INFRASTRUCTURE Subagent                â”‚
â”‚  - Docker, docker-compose               â”‚
â”‚  - Bootstrap scripts                    â”‚
â”‚  - Migrations                           â”‚
â”‚  - Environment setup                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ ÑÑƒĞ±Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²

### Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ flow ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ ÑĞ´ĞµĞ»ĞºĞ¸

```
Frontend
   â”‚
   â”œâ”€â†’ Gateway (Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)
   â”‚    â”‚
   â”‚    â”œâ”€â†’ CRM Service (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ÑĞ´ĞµĞ»ĞºĞ¸)
   â”‚    â”‚    â”‚
   â”‚    â”‚    â”œâ”€â†’ PostgreSQL (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ)
   â”‚    â”‚    â”œâ”€â†’ RabbitMQ (Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)
   â”‚    â”‚    â””â”€â†’ Celery Worker (background jobs)
   â”‚    â”‚
   â”‚    â”œâ”€â†’ Notifications (SSE ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ)
   â”‚    â””â”€â†’ Audit Service (Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)
   â”‚
   â””â”€â†’ Frontend (Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ° Ñ‡ĞµÑ€ĞµĞ· SSE)
```

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Telegram

```
Telegram Bot
   â”‚
   â”œâ”€â†’ Gateway (HTTPS webhook)
   â”‚    â”‚
   â”‚    â””â”€â†’ CRM Service (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸/ÑĞ´ĞµĞ»ĞºĞ¸)
   â”‚         â”‚
   â”‚         â”œâ”€â†’ RabbitMQ (ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ)
   â”‚         â””â”€â†’ PostgreSQL (ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ)
   â”‚
   â””â”€â†’ Notifications (Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° ÑĞ·ĞµÑ€Ñƒ)
```

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¸ subagent'Ğ¾Ğ²

```
.claude/
â”‚
â”œâ”€â”€ INDEX.md                    â† Ğ’Ñ‹ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚Ğµ Ğ¾Ñ‚ÑÑĞ´Ğ°
â”œâ”€â”€ QUICK_START.md              â† 10 Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ´Ğ»Ñ Ğ½Ğ¾Ğ²Ğ¸Ñ‡ĞºĞ¾Ğ²
â”œâ”€â”€ AGENTS_SUMMARY.md           â† ĞŸĞ¾Ğ»Ğ½Ğ°Ñ ÑĞ¿Ñ€Ğ°Ğ²ĞºĞ°
â”œâ”€â”€ SETUP_REPORT.md             â† Ğ§Ñ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¾
â”œâ”€â”€ ARCHITECTURE.md             â† Ğ­Ñ‚Ğ¾Ñ‚ Ñ„Ğ°Ğ¹Ğ»
â”‚
â”œâ”€â”€ settings.local.json         â† ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ğ¹
â”‚
â””â”€â”€ agents/                      â† Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ subagent'Ğ°
    â”œâ”€â”€ README.md               â† Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ
    â”‚
    â”œâ”€â”€ [Frontend & Desktop]
    â”œâ”€â”€ frontend.md             â† Web UI (Next.js)
    â”œâ”€â”€ desktop-app.md          â† Desktop GUI (Tkinter) âœ¨ NEW
    â”‚
    â”œâ”€â”€ [API & Routing]
    â”œâ”€â”€ gateway.md              â† API Gateway (NestJS)
    â”‚
    â”œâ”€â”€ [Authentication & Core]
    â”œâ”€â”€ auth.md                 â† Auth Service (Spring Boot)
    â”œâ”€â”€ crm.md                  â† CRM Service (FastAPI)
    â”‚
    â”œâ”€â”€ [Supporting Services]
    â”œâ”€â”€ documents.md            â† Document Management (NestJS)
    â”œâ”€â”€ notifications.md        â† Notifications (NestJS)
    â”œâ”€â”€ tasks.md                â† Task Management (NestJS)
    â”œâ”€â”€ reports.md              â† Analytics (FastAPI)
    â”œâ”€â”€ audit.md                â† Audit Logging (NestJS)
    â”œâ”€â”€ telegram-bot.md         â† Telegram Integration (Python)
    â”œâ”€â”€ backup.md               â† Backup Service (Bash)
    â”‚
    â””â”€â”€ [Infrastructure]
        â””â”€â”€ infrastructure.md   â† DevOps & Docker
```

## ğŸ¯ ĞšĞ°Ğº Ğ²Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ subagent

```
Ğ’Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ñ...
â”‚
â”œâ”€ Ğ’ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ¼ (ĞºĞ½Ğ¾Ğ¿ĞºĞ¸, Ñ„Ğ¾Ñ€Ğ¼Ñ‹, ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹)
â”‚  â””â”€â†’ FRONTEND subagent
â”‚
â”œâ”€ Ğ”ĞµÑĞºÑ‚Ğ¾Ğ¿Ğ½Ñ‹Ğ¼ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ (Tkinter Ğ¾ĞºĞ½Ğ°, Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³Ğ¸)
â”‚  â””â”€â†’ DESKTOP-APP subagent âœ¨
â”‚
â”œâ”€ API endpoints, Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹
â”‚  â”œâ”€ Ğ”Ğ»Ñ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸, SSE, session
â”‚  â”‚  â””â”€â†’ GATEWAY subagent
â”‚  â”‚
â”‚  â””â”€ Ğ”Ğ»Ñ Ğ±Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ¸
â”‚     â”œâ”€ ĞšĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹, ÑĞ´ĞµĞ»ĞºĞ¸, Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶Ğ¸
â”‚     â”‚  â””â”€â†’ CRM subagent
â”‚     â”‚
â”‚     â”œâ”€ Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ¸ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ
â”‚     â”‚  â””â”€â†’ DOCUMENTS subagent
â”‚     â”‚
â”‚     â”œâ”€ Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ, Telegram
â”‚     â”‚  â””â”€â†’ NOTIFICATIONS subagent
â”‚     â”‚
â”‚     â”œâ”€ Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ¸ Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ
â”‚     â”‚  â””â”€â†’ TASKS subagent
â”‚     â”‚
â”‚     â”œâ”€ ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ° Ğ¸ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹
â”‚     â”‚  â””â”€â†’ REPORTS subagent
â”‚     â”‚
â”‚     â””â”€ Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸ Ğ°ÑƒĞ´Ğ¸Ñ‚
â”‚        â””â”€â†’ AUDIT subagent
â”‚
â”œâ”€ ĞÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸ĞµĞ¹ Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸
â”‚  â””â”€â†’ AUTH subagent
â”‚
â”œâ”€ Docker, Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸, bootstrap
â”‚  â””â”€â†’ INFRASTRUCTURE subagent
â”‚
â”œâ”€ Telegram Ğ±Ğ¾Ñ‚Ğ¾Ğ¼
â”‚  â””â”€â†’ TELEGRAM-BOT subagent
â”‚
â””â”€ Ğ ĞµĞ·ĞµÑ€Ğ²Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ¾Ğ¿Ğ¸ÑĞ¼Ğ¸
   â””â”€â†’ BACKUP subagent
```

## ğŸ”Œ Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ points

### RabbitMQ Event Bus
```
Events published:
- deal.created, deal.updated, deal.deleted
- deal.payment.updated, deal.payment.income.*, deal.payment.expense.*
- task.created, task.status.changed, task.reminder
- document.uploaded, document.deleted
- notification.sent
- user.created, user.updated

Consumers:
- CRM â†’ publishes deal events
- Tasks â†’ publishes task events
- Documents â†’ publishes document events
- Notifications â†’ subscribes to all
- Audit â†’ subscribes to all
- Reports â†’ subscribes to deal/task events
```

### SSE Streams
```
Frontend subscribes to:
- /api/v1/streams/deals      â† Real-time deal updates
- /api/v1/streams/notifications â† User notifications

Desktop App potential:
- Could subscribe to same streams in future
```

### Database Schemas
```
PostgreSQL single cluster, separate schemas:
- auth.users, auth.roles
- crm.clients, crm.deals, crm.payments
- documents.files, documents.acl
- tasks.tasks, tasks.assignments
- notifications.events
- reports.views
- audit.events
- bot.users
```

## ğŸ“Š Technology Matrix

| Ğ¯Ğ·Ñ‹Ğº | Ğ¡ÑƒĞ±Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ | Framework | Port Manager |
|------|-----------|-----------|-------------|
| **TypeScript** | frontend, gateway, documents, notifications, tasks, audit | Next.js, NestJS | pnpm |
| **Python** | desktop-app, crm, reports, telegram-bot | Tkinter, FastAPI, aiogram | pip, Poetry |
| **Kotlin** | auth | Spring Boot | Gradle |
| **Bash/Docker** | infrastructure, backup | Docker, docker-compose | Bash scripts |

## ğŸš€ Typical Development Flow

### 1. Adding a new feature

```
Step 1: Define API endpoint
â””â”€â†’ Use CRM/Gateway subagent

Step 2: Implement backend logic
â”œâ”€â†’ CRM subagent (for business logic)
â”œâ”€â†’ Database schema (Infrastructure subagent)
â””â”€â†’ Event publishing (CRM subagent)

Step 3: Build frontend UI
â”œâ”€â†’ Frontend subagent (for web)
â””â”€â†’ Desktop-App subagent (for desktop)

Step 4: Add notifications
â””â”€â†’ Notifications subagent

Step 5: Update tests
â””â”€â†’ Specific subagent for service

Result: Feature complete across all clients
```

## ğŸ“ Configuration Files

```
.claude/
â”œâ”€â”€ INDEX.md                â† Navigation hub
â”œâ”€â”€ QUICK_START.md          â† Getting started (10 min)
â”œâ”€â”€ AGENTS_SUMMARY.md       â† Full reference (30 min)
â”œâ”€â”€ SETUP_REPORT.md         â† What was created
â”œâ”€â”€ ARCHITECTURE.md         â† This file
â”œâ”€â”€ settings.local.json     â† Permissions config
â”‚
â””â”€â”€ agents/
    â”œâ”€â”€ README.md           â† Subagent documentation
    â””â”€â”€ <name>.md           â† Individual subagent docs (14 total)
```

## âœ¨ Latest Changes

- **âœ¨ NEW**: `desktop-app.md` subagent for Tkinter GUI development
- **Updated**: `README.md` with desktop-app references
- **Created**: `QUICK_START.md` for quick onboarding
- **Created**: `AGENTS_SUMMARY.md` for full reference
- **Created**: `INDEX.md` for navigation
- **Created**: `ARCHITECTURE.md` (this file)

## ğŸ¯ Next Steps

1. **For Development**: Read [QUICK_START.md](./QUICK_START.md)
2. **For Reference**: Read [AGENTS_SUMMARY.md](./AGENTS_SUMMARY.md)
3. **For Specific Service**: Read agents/*.md file
4. **For Infrastructure**: Read [agents/infrastructure.md](./agents/infrastructure.md)

---

**Start here** â†’ [INDEX.md](./INDEX.md) or [QUICK_START.md](./QUICK_START.md)
